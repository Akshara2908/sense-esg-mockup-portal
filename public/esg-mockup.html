<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESG Management Portal - Helix Sense</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #F8F9FA;
            color: #333333;
            line-height: 1.6;
        }

        /* Utility Classes */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .grid { display: grid; gap: 20px; }
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }
        .flex { display: flex; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        .align-center { align-items: center; }
        .align-stretch { align-items: stretch; }
        .text-center { text-align: center; }
        .mb-10 { margin-bottom: 10px; }
        .mb-20 { margin-bottom: 20px; }
        .mt-20 { margin-top: 20px; }
        .mr-10 { margin-right: 10px; }
        .ml-10 { margin-left: 10px; }

        /* Layout */
        .navbar {
            background: #E0E0E0;
            padding: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .nav-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #FFFFFF;
            border-bottom: 1px solid #DEE2E6;
        }

        .nav-tabs {
            display: flex;
            background: #E0E0E0;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
            color: #6C757D;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-tab:hover {
            background: #D1ECF1;
        }

        .nav-tab.active {
            background: #28A745;
            color: white;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .hamburger {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 10px;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: -250px;
            top: 120px;
            width: 250px;
            height: calc(100vh - 120px);
            background: #E0E0E0;
            transition: left 0.3s ease;
            overflow-y: auto;
            z-index: 900;
            border-right: 1px solid #DEE2E6;
        }

        .sidebar.static {
            left: 0;
            position: fixed;
        }

        .sidebar-content {
            padding: 20px;
        }

        .sidebar-category {
            margin-bottom: 10px;
        }

        .sidebar-category-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: #F8F9FA;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #6C757D;
        }

        .sidebar-category-title:hover {
            background: #E9ECEF;
        }

        .sidebar-category-title.active {
            background: #28A745;
            color: white;
        }

        .sidebar-category-icon {
            margin-right: 10px;
            font-size: 18px;
        }

        .sidebar-subcategories {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .sidebar-subcategories.expanded {
            max-height: 300px;
        }

        .sidebar-subcategory {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            margin-left: 15px;
            margin-top: 5px;
            background: #F1F3F4;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            color: #6C757D;
        }

        .sidebar-subcategory:hover {
            background: #E9ECEF;
        }

        .sidebar-subcategory.active {
            background: #28A745;
            color: white;
        }

        .sidebar-subcategory-icon {
            margin-right: 8px;
            font-size: 14px;
        }

        /* Main Content */
        .main-content {
            margin-top: 120px;
            padding: 30px;
            transition: margin-left 0.3s ease;
        }

        .main-content.with-sidebar {
            margin-left: 270px;
        }

        /* Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .card-header {
            padding: 20px 25px;
            border-bottom: 1px solid #E9ECEF;
            background: #F8F9FA;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #333333;
        }

        .card-subtitle {
            color: #6C757D;
            font-size: 14px;
            margin-top: 5px;
        }

        .card-content {
            padding: 25px;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333333;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #DEE2E6;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #28A745;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: #28A745;
            color: white;
        }

        .btn-primary:hover {
            background: #218838;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #DEE2E6;
            color: #6C757D;
        }

        .btn-secondary:hover {
            background: #C6CFDA;
        }

        .btn-disabled {
            background: #6C757D !important;
            cursor: not-allowed !important;
            opacity: 0.6;
        }

        .btn-full {
            width: 100%;
        }

        .btn-icon {
            padding: 10px;
            border-radius: 50%;
        }

        /* Progress Bar */
        .progress {
            width: 100%;
            height: 8px;
            background: #E9ECEF;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: #28A745;
            transition: width 0.3s ease;
        }

        .progress-bar.warning {
            background: #FFC107;
        }

        .progress-bar.danger {
            background: #DC3545;
        }

        .progress-fill {
            height: 100%;
            background: #28A745;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 12px;
            color: #6C757D;
            margin-top: 5px;
            display: block;
        }

        /* Login & Organization Forms */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 120px);
            padding: 20px;
        }

        .login-form {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }

        .login-form h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #333333;
            font-weight: 600;
        }

        .hint {
            text-align: center;
            color: #6C757D;
            font-size: 12px;
            margin-top: 15px;
        }

        /* Goal Items */
        .goal-item {
            padding: 20px;
            margin-bottom: 15px;
            background: #F8F9FA;
            border-radius: 8px;
            border-left: 4px solid #28A745;
        }

        .goal-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #28A745;
        }

        .goal-card h3 {
            margin-bottom: 10px;
            color: #333333;
            font-size: 16px;
        }

        .goal-card p {
            color: #6C757D;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .goals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .goals-section {
            margin-bottom: 40px;
        }

        .goals-section h2 {
            margin-bottom: 20px;
            color: #333333;
            font-weight: 600;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .table th,
        .table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #E9ECEF;
        }

        .table th {
            background: #F8F9FA;
            font-weight: 600;
            color: #333333;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .table td {
            font-size: 14px;
        }

        .table tr:hover {
            background: #F8F9FA;
        }

        /* Badges */
        .badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-completed {
            background: #D4EDDA;
            color: #155724;
        }

        .badge-in-progress {
            background: #D1ECF1;
            color: #0C5460;
        }

        .badge-pending {
            background: #FFF3CD;
            color: #856404;
        }

        /* Parameter Selection */
        .parameter-section {
            margin-bottom: 30px;
        }

        .parameter-section h3 {
            margin-bottom: 15px;
            color: #333333;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .parameter-list {
            background: #F8F9FA;
            border-radius: 8px;
            padding: 20px;
        }

        .parameter-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #E9ECEF;
        }

        .parameter-item:last-child {
            border-bottom: none;
        }

        .parameter-info {
            flex: 1;
        }

        .parameter-name {
            font-weight: 500;
            color: #333333;
            margin-bottom: 5px;
        }

        .parameter-details {
            font-size: 12px;
            color: #6C757D;
        }

        .parameter-mandatory {
            background: #DC3545;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .parameter-optional {
            background: #28A745;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 500;
            text-transform: uppercase;
        }

        /* Navigation Buttons */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #E9ECEF;
        }

        .page-indicator {
            font-size: 14px;
            color: #6C757D;
            font-weight: 500;
        }

        /* Planning Steps */
        .planning-steps {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .planning-step {
            flex: 1;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .planning-step:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .planning-step.completed {
            background: #D4EDDA;
            border-left: 4px solid #28A745;
        }

        .step-header {
            padding: 20px;
            background: #F8F9FA;
            border-bottom: 1px solid #E9ECEF;
        }

        .step-number {
            background: #28A745;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .step-title {
            font-weight: 600;
            color: #333333;
            margin-bottom: 5px;
        }

        .step-description {
            font-size: 14px;
            color: #6C757D;
        }

        .step-content {
            padding: 20px;
        }

        /* Slide Drawer */
        .drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .drawer-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .slide-drawer {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100%;
            background: white;
            z-index: 1001;
            transition: right 0.3s ease;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
        }

        .slide-drawer.active {
            right: 0;
        }

        .slide-drawer-header {
            padding: 20px;
            border-bottom: 1px solid #E9ECEF;
            background: #F8F9FA;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .slide-drawer-content {
            padding: 20px;
            height: calc(100% - 80px);
            overflow-y: auto;
        }

        /* Charts */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }

        /* KPI Grid */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .kpi-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }

        .kpi-value {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .kpi-value.success {
            color: #28A745;
        }

        .kpi-value.warning {
            color: #FFC107;
        }

        .kpi-value.danger {
            color: #DC3545;
        }

        .kpi-label {
            font-size: 14px;
            color: #6C757D;
        }

        /* Report Tabs */
        .report-tabs {
            display: flex;
            background-color: #F8F9FA;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .report-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: none;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .report-tab.active {
            background-color: #28A745;
            color: white;
        }

        .report-tab:hover:not(.active) {
            background-color: #E9ECEF;
        }

        /* Add Goal Form */
        .add-goal-form {
            background: #F8F9FA;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .add-goal-form h3 {
            margin-bottom: 20px;
            color: #333333;
            font-weight: 600;
        }

        /* Goals list by category */
        .goals-by-category {
            margin-bottom: 30px;
        }

        .category-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .category-header {
            padding: 20px 25px;
            border-bottom: 1px solid #E9ECEF;
            background: #F8F9FA;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .category-content {
            padding: 20px 25px;
            display: none;
        }

        .category-content.expanded {
            display: block;
        }

        .goal-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #E9ECEF;
        }

        .goal-list-item:last-child {
            border-bottom: none;
        }

        .goal-name {
            font-weight: 500;
            color: #333333;
        }

        .goal-description {
            font-size: 14px;
            color: #6C757D;
            margin-top: 5px;
        }

        /* Implementation specific styles */
        .implementation-goal {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .implementation-goal-header {
            padding: 20px 25px;
            border-bottom: 1px solid #E9ECEF;
            background: #F8F9FA;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .implementation-goal-content {
            padding: 20px 25px;
            display: none;
        }

        .implementation-goal-content.expanded {
            display: block;
        }

        .initiative-item,
        .target-item,
        .task-item {
            background: #F8F9FA;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 3px solid #28A745;
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .item-name {
            font-weight: 500;
            color: #333333;
        }

        .item-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-pending {
            background: #FFF3CD;
            color: #856404;
        }

        .status-in-progress {
            background: #D1ECF1;
            color: #0C5460;
        }

        .status-completed {
            background: #D4EDDA;
            color: #155724;
        }

        /* Goal progress bars in implementation */
        .goal-progress-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .goal-title-text {
            flex: 1;
        }

        .goal-progress-bar {
            width: 120px;
            height: 6px;
            background: #E9ECEF;
            border-radius: 3px;
            overflow: hidden;
        }

        .goal-progress-fill {
            height: 100%;
            background: #28A745;
            transition: width 0.3s ease;
        }

        .goal-progress-text {
            font-size: 12px;
            color: #6C757D;
            min-width: 35px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }

            .nav-tabs {
                display: none;
            }

            .nav-tabs.mobile-show {
                display: flex;
                flex-direction: column;
                position: absolute;
                top: 60px;
                left: 0;
                right: 0;
                background: #E0E0E0;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }

            .sidebar {
                left: -250px;
                transition: left 0.3s ease;
            }

            .sidebar.mobile-show {
                left: 0;
            }

            .main-content.with-sidebar {
                margin-left: 30px;
            }

            .planning-steps {
                flex-direction: column;
            }

            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-header">
            <div style="display: flex; align-items: center;">
                <span class="material-icons" style="margin-right: 10px;">eco</span>
                <span style="font-weight: 600;">Helix Sense ESG Portal</span>
            </div>
            <div style="display: flex; align-items: center; gap: 15px;">
                <span>Welcome, Admin</span>
                <span class="material-icons" style="cursor: pointer;">account_circle</span>
            </div>
        </div>
        <div class="nav-tabs" id="navTabs">
            <button class="nav-tab active" data-page="home">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">home</span>
                Home
            </button>
            <button class="nav-tab" data-page="planning">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">timeline</span>
                Planning
            </button>
            <button class="nav-tab" data-page="implementation">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">build</span>
                Implementation
            </button>
            <button class="nav-tab" data-page="monitoring">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">bar_chart</span>
                Monitoring
            </button>
            <button class="nav-tab" data-page="reporting">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">description</span>
                Reporting
            </button>
            <button class="nav-tab" data-page="esg-ai">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">psychology</span>
                ESG AI
            </button>
        </div>
        <button class="hamburger" id="hamburger">
            <span class="material-icons">menu</span>
        </button>
    </nav>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-content" id="sidebarContent">
            <!-- Dynamic content based on current page -->
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        
        <!-- Login Page -->
        <div class="page active" id="login">
            <div class="login-container">
                <form class="login-form" id="loginForm">
                    <h2>ESG Portal Login</h2>
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Login</button>
                    <div class="hint">Enter any credentials to login</div>
                </form>
            </div>
        </div>

        <!-- Organization Details Page -->
        <div class="page" id="organization">
            <div class="login-container">
                <form class="login-form" id="orgForm" style="max-width: 500px;">
                    <h2>Organization Details</h2>
                    <div class="form-group">
                        <label for="orgName">Organization Name</label>
                        <input type="text" id="orgName" name="orgName" required>
                    </div>
                    <div class="form-group">
                        <label for="location">Location</label>
                        <select id="location" name="location" required>
                            <option value="">Select Country</option>
                            <option value="IN">India</option>
                            <option value="US">United States</option>
                            <option value="UK">United Kingdom</option>
                            <option value="DE">Germany</option>
                            <option value="FR">France</option>
                            <option value="JP">Japan</option>
                            <option value="CN">China</option>
                            <option value="AU">Australia</option>
                            <option value="CA">Canada</option>
                            <option value="BR">Brazil</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="employees">Number of Employees</label>
                        <input type="number" id="employees" name="employees" min="1" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Submit</button>
                </form>
            </div>
        </div>

        <!-- Home Page -->
        <div class="page" id="home">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">ESG Dashboard</h1>
            
            <!-- Key Metrics -->
            <div class="grid grid-4 mb-20">
                <div class="card text-center">
                    <div class="card-title" style="color: #28A745; font-size: 24px;">12</div>
                    <div class="card-subtitle">Active Goals</div>
                </div>
                <div class="card text-center">
                    <div class="card-title" style="color: #FFC107; font-size: 24px;">67%</div>
                    <div class="card-subtitle">Average Progress</div>
                </div>
                <div class="card text-center">
                    <div class="card-title" style="color: #007BFF; font-size: 24px;">8</div>
                    <div class="card-subtitle">Active Initiatives</div>
                </div>
                <div class="card text-center">
                    <div class="card-title" style="color: #DC3545; font-size: 24px;">3</div>
                    <div class="card-subtitle">Behind Schedule</div>
                </div>
            </div>

            <!-- Goals Overview -->
            <div class="goals-section">
                <h2>Goals Overview</h2>
                <div class="goals-grid">
                    <div class="goal-card">
                        <h3>🌱 Reduce Energy Use</h3>
                        <p>Lower energy consumption by 20%</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%;"></div>
                        </div>
                        <span class="progress-text">75% Complete</span>
                    </div>
                    <div class="goal-card">
                        <h3>💧 Improve Water Efficiency</h3>
                        <p>Reduce water usage by 15%</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 45%;"></div>
                        </div>
                        <span class="progress-text">45% Complete</span>
                    </div>
                    <div class="goal-card">
                        <h3>👥 Enhance Employee Wellness</h3>
                        <p>Implement wellness programs</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 60%;"></div>
                        </div>
                        <span class="progress-text">60% Complete</span>
                    </div>
                    <div class="goal-card">
                        <h3>🌍 Improve Diversity</h3>
                        <p>Increase diversity hiring</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 30%;"></div>
                        </div>
                        <span class="progress-text">30% Complete</span>
                    </div>
                    <div class="goal-card">
                        <h3>⚖️ Improve Compliance Training</h3>
                        <p>Enhance training coverage</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 85%;"></div>
                        </div>
                        <span class="progress-text">85% Complete</span>
                    </div>
                    <div class="goal-card">
                        <h3>📜 Enhance Transparency</h3>
                        <p>Improve disclosure practices</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 50%;"></div>
                        </div>
                        <span class="progress-text">50% Complete</span>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="card mt-20">
                <div class="card-header">
                    <div class="card-title">Recent Activity</div>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Activity</th>
                                <th>Category</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2025-01-15</td>
                                <td>Energy Audit Completed</td>
                                <td>Environmental</td>
                                <td><span class="badge badge-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2025-01-14</td>
                                <td>Diversity Training Started</td>
                                <td>Social</td>
                                <td><span class="badge badge-in-progress">In Progress</span></td>
                            </tr>
                            <tr>
                                <td>2025-01-13</td>
                                <td>Compliance Review</td>
                                <td>Governance</td>
                                <td><span class="badge badge-pending">Pending</span></td>
                            </tr>
                            <tr>
                                <td>2025-01-12</td>
                                <td>Water Usage Report</td>
                                <td>Environmental</td>
                                <td><span class="badge badge-completed">Completed</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Planning Page -->
        <div class="page" id="planning">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">ESG Planning</h1>
            
            <!-- Planning Steps Overview -->
            <div class="planning-steps">
                <div class="planning-step completed" onclick="showSubPage('standards')">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <div class="step-title">Standards Selection</div>
                        <div class="step-description">Choose ESG reporting standards</div>
                    </div>
                </div>
                <div class="planning-step" onclick="showSubPage('parameters')">
                    <div class="step-header">
                        <div class="step-number">2</div>
                        <div class="step-title">Select Parameters</div>
                        <div class="step-description">Define measurement parameters</div>
                    </div>
                </div>
                <div class="planning-step" onclick="showSubPage('goals')">
                    <div class="step-header">
                        <div class="step-number">3</div>
                        <div class="step-title">Goals Setting</div>
                        <div class="step-description">Set sustainability goals</div>
                    </div>
                </div>
                <div class="planning-step" onclick="showSubPage('baseline')">
                    <div class="step-header">
                        <div class="step-number">4</div>
                        <div class="step-title">Baseline Data</div>
                        <div class="step-description">Enter baseline measurements</div>
                    </div>
                </div>
            </div>

            <!-- Sub-pages for planning -->
            <div id="standards-page" class="content-section active">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Select ESG Reporting Standards</div>
                        <div class="card-subtitle">Choose the standards your organization will follow</div>
                    </div>
                    <div class="card-content">
                        <div class="grid grid-3">
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="brsr" name="standard" value="brsr" checked>
                                    <label for="brsr">
                                        <strong>BRSR (Business Responsibility and Sustainability Reporting)</strong><br>
                                        <small>Mandatory for listed companies in India</small>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="gri" name="standard" value="gri">
                                    <label for="gri">
                                        <strong>GRI (Global Reporting Initiative)</strong><br>
                                        <small>Comprehensive global sustainability standards</small>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="sasb" name="standard" value="sasb">
                                    <label for="sasb">
                                        <strong>SASB (Sustainability Accounting Standards Board)</strong><br>
                                        <small>Industry-specific sustainability standards</small>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="tcfd" name="standard" value="tcfd">
                                    <label for="tcfd">
                                        <strong>TCFD (Task Force on Climate-related Financial Disclosures)</strong><br>
                                        <small>Climate risk reporting framework</small>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="cdp" name="standard" value="cdp">
                                    <label for="cdp">
                                        <strong>CDP (Carbon Disclosure Project)</strong><br>
                                        <small>Environmental disclosure system</small>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="ifrs" name="standard" value="ifrs">
                                    <label for="ifrs">
                                        <strong>IFRS S1 & S2</strong><br>
                                        <small>International sustainability disclosure standards</small>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="navigation-buttons">
                            <div></div>
                            <button class="btn btn-primary" onclick="showSubPage('parameters')">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Select Parameters Sub-page -->
            <div id="parameters-page" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Select Parameters</div>
                        <div class="card-subtitle" id="categorySubtitle">Environmental Parameters</div>
                    </div>
                    <div class="card-content">
                        <div id="parametersContent">
                            <!-- Parameters will be dynamically loaded here -->
                        </div>
                        <div class="navigation-buttons">
                            <button class="btn btn-secondary" id="paramBackBtn" onclick="navigateParameterCategory('back')">Back</button>
                            <div class="page-indicator" id="paramPageIndicator">Environmental (1 of 3)</div>
                            <button class="btn btn-primary" id="paramNextBtn" onclick="navigateParameterCategory('next')">Next</button>
                        </div>
                        <div style="margin-top: 20px; text-align: center;">
                            <button class="btn btn-secondary" onclick="showSelectedParameters()">View Selected Parameters</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Goals Setting Sub-page -->
            <div id="goals-page" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Goals Setting</div>
                        <div class="card-subtitle" id="goalsSubtitle">Environmental Goals</div>
                    </div>
                    <div class="card-content">
                        <!-- Add Goal Form -->
                        <div class="add-goal-form">
                            <h3>Add New Goal</h3>
                            <div class="checkbox-group">
                                <input type="checkbox" id="customGoalToggle" onchange="toggleCustomGoal()">
                                <label for="customGoalToggle">Add Custom Goal</label>
                            </div>
                            
                            <!-- Template Goal Form -->
                            <div id="templateGoalForm">
                                <div class="form-group">
                                    <label for="goalTemplate">Choose Template</label>
                                    <select id="goalTemplate">
                                        <!-- Options will be populated dynamically -->
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="templateDescription">Description</label>
                                    <textarea id="templateDescription" placeholder="Add description for this goal"></textarea>
                                </div>
                            </div>
                            
                            <!-- Custom Goal Form -->
                            <div id="customGoalForm" style="display: none;">
                                <div class="form-group">
                                    <label for="customGoalName">Goal Name</label>
                                    <input type="text" id="customGoalName" placeholder="Enter goal name">
                                </div>
                                <div class="form-group">
                                    <label for="customGoalDescription">Description</label>
                                    <textarea id="customGoalDescription" placeholder="Enter goal description"></textarea>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary" onclick="addGoal()">Add Goal</button>
                        </div>

                        <!-- Goals List by Category -->
                        <div class="goals-by-category" id="goalsByCategory">
                            <!-- Goals will be displayed here grouped by category -->
                        </div>

                        <div class="navigation-buttons">
                            <button class="btn btn-secondary" id="goalsBackBtn" onclick="navigateGoalsCategory('back')">Back</button>
                            <div class="page-indicator" id="goalsPageIndicator">Environmental (1 of 3)</div>
                            <button class="btn btn-primary" id="goalsNextBtn" onclick="navigateGoalsCategory('next')">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Baseline Data Sub-page -->
            <div id="baseline-page" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Baseline Data Entry</div>
                        <div class="card-subtitle">Enter baseline values for selected parameters</div>
                    </div>
                    <div class="card-content">
                        <div class="form-group">
                            <label for="baselineYear">Baseline Year</label>
                            <select id="baselineYear">
                                <option value="">Select Year</option>
                                <option value="2025">2025</option>
                                <option value="2024">2024</option>
                                <option value="2023">2023</option>
                                <option value="2022">2022</option>
                                <option value="2021">2021</option>
                                <option value="2020">2020</option>
                                <option value="2019">2019</option>
                                <option value="2018">2018</option>
                                <option value="2017">2017</option>
                                <option value="2016">2016</option>
                            </select>
                        </div>
                        
                        <div id="baselineParameters">
                            <!-- Parameters will be loaded here -->
                        </div>

                        <div class="navigation-buttons">
                            <button class="btn btn-secondary" onclick="showSubPage('goals')">Back</button>
                            <div></div>
                            <button class="btn btn-primary" onclick="alert('Baseline data saved!')">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Implementation Page -->
        <div class="page" id="implementation">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">Implementation</h1>
            <p style="margin-bottom: 30px; color: #6C757D;">Track and manage your ESG goals</p>
            
            <div id="implementationContent">
                <!-- Implementation content will be loaded here -->
            </div>

            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="implBackBtn" onclick="navigateImplementationGoals('back')">Back</button>
                <div class="page-indicator" id="implPageIndicator">Environmental (1 of 3)</div>
                <button class="btn btn-primary" id="implNextBtn" onclick="navigateImplementationGoals('next')">Next</button>
            </div>
        </div>

        <!-- Monitoring Page -->
        <div class="page" id="monitoring">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">ESG Monitoring</h1>
            
            <!-- KPI Overview -->
            <div class="kpi-grid" id="kpiGrid">
                <!-- KPIs will be loaded here -->
            </div>

            <!-- Charts Section -->
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title" id="selectedCategoryTitle">Environmental Metrics</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Progress Distribution</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="progressChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reporting Page -->
        <div class="page" id="reporting">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">ESG Reporting</h1>
            
            <!-- Report Standard Tabs -->
            <div class="report-tabs">
                <button class="report-tab active" onclick="selectReportingStandard('brsr')">BRSR</button>
                <button class="report-tab" onclick="selectReportingStandard('gri')">GRI</button>
                <button class="report-tab" onclick="selectReportingStandard('ifrs')">IFRS S1 & S2</button>
            </div>

            <!-- Report Content -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title" id="reportSectionTitle">BRSR - General Disclosures</div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-secondary" onclick="downloadReport()">Download</button>
                        <button class="btn btn-primary">Generate Report</button>
                    </div>
                </div>
                <div class="card-content">
                    <div id="reportingFields">
                        <!-- Dynamic fields will be loaded here based on sidebar selection -->
                    </div>

                    <div class="navigation-buttons">
                        <button class="btn btn-secondary" id="reportBackBtn" onclick="navigateReportingSections('back')">Back</button>
                        <div class="page-indicator" id="reportPageIndicator">1 of 10</div>
                        <button class="btn btn-primary" id="reportNextBtn" onclick="navigateReportingSections('next')">Next</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ESG AI Page -->
        <div class="page" id="esg-ai">
            <div class="card text-center" style="min-height: 400px; display: flex; align-items: center; justify-content: center;">
                <div>
                    <span class="material-icons" style="font-size: 64px; color: #28A745; margin-bottom: 20px;">psychology</span>
                    <h2 style="color: #333333; margin-bottom: 10px;">ESG AI Assistant</h2>
                    <p style="color: #6C757D; font-size: 18px;">Coming Soon</p>
                    <p style="color: #6C757D; margin-top: 20px;">Our AI-powered ESG insights and recommendations will be available shortly.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide Drawer for Adding Items -->
    <div class="drawer-overlay" id="drawerOverlay" onclick="closeDrawer()"></div>
    <div class="slide-drawer" id="addDrawer">
        <div class="slide-drawer-header">
            <h3 id="drawerTitle">Add Item</h3>
            <button onclick="closeDrawer()" style="background: none; border: none; font-size: 24px; cursor: pointer;">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="slide-drawer-content">
            <div id="drawerFields">
                <!-- Dynamic form fields will be loaded here -->
            </div>
            <div style="margin-top: 20px;">
                <button class="btn btn-primary btn-full" onclick="saveDrawerItem()">Save</button>
            </div>
        </div>
    </div>

    <!-- Selected Parameters Modal -->
    <div class="drawer-overlay" id="selectedParamsOverlay" onclick="closeSelectedParams()"></div>
    <div class="slide-drawer" id="selectedParamsDrawer">
        <div class="slide-drawer-header">
            <h3>Selected Parameters</h3>
            <div style="display: flex; gap: 10px; align-items: center;">
                <button class="btn btn-secondary" onclick="exportParameters()">Export CSV</button>
                <button onclick="closeSelectedParams()" style="background: none; border: none; font-size: 24px; cursor: pointer;">
                    <span class="material-icons">close</span>
                </button>
            </div>
        </div>
        <div class="slide-drawer-content">
            <div id="selectedParametersContent">
                <!-- Selected parameters will be displayed here -->
            </div>
        </div>
    </div>

    <script>
        // Data Models
        const esgData = {
            selectedStandards: ['brsr'],
            selectedParameters: [],
            goals: {
                Environmental: [
                    { id: 'reduce-energy', name: 'Reduce Energy Use', description: 'Lower energy consumption by 20%', subcategory: 'energy' },
                    { id: 'water-efficiency', name: 'Improve Water Efficiency', description: 'Reduce water usage by 15%', subcategory: 'water' }
                ],
                Social: [
                    { id: 'employee-wellness', name: 'Enhance Employee Wellness', description: 'Implement wellness programs' },
                    { id: 'diversity', name: 'Improve Diversity', description: 'Increase diversity hiring' }
                ],
                Governance: [
                    { id: 'compliance-training', name: 'Improve Compliance Training', description: 'Enhance training coverage' },
                    { id: 'transparency', name: 'Enhance Transparency', description: 'Improve disclosure practices' }
                ]
            },
            initiatives: {
                'reduce-energy': [
                    { id: 'energy-audit', name: 'Energy Audit', description: 'Comprehensive energy assessment', status: 'In Progress' }
                ],
                'water-efficiency': [
                    { id: 'water-management', name: 'Water Management Plan', description: 'Develop water conservation strategy', status: 'Pending' }
                ],
                'employee-wellness': [
                    { id: 'wellness-program', name: 'Wellness Program', description: 'Employee health and wellness initiative', status: 'In Progress' }
                ],
                'diversity': [
                    { id: 'diversity-training', name: 'Diversity Training', description: 'Bias training and inclusive practices', status: 'Pending' }
                ],
                'compliance-training': [
                    { id: 'compliance-audit', name: 'Compliance Audit', description: 'Regular compliance assessment', status: 'In Progress' }
                ],
                'transparency': [
                    { id: 'transparency-report', name: 'Transparency Report', description: 'Annual transparency disclosure', status: 'Pending' }
                ]
            },
            targets: {
                'energy-audit': [
                    { id: 'renewables-80', name: '80% Renewables', initiative: 'Energy Audit', level: 'Organization', tracking: 'Monthly', action: 'Percentage Increase', value: '80%', year: '2027' }
                ],
                'wellness-program': [
                    { id: 'wellness-participation', name: 'Increase Wellness Participation', initiative: 'Wellness Program', level: 'Facility', tracking: 'Quarterly', action: 'Increase', value: '50%', year: '2026' }
                ],
                'compliance-audit': [
                    { id: 'training-coverage', name: '100% Training Coverage', initiative: 'Compliance Audit', level: 'Organization', tracking: 'Monthly', action: 'Increase', value: '100%', year: '2026' }
                ]
            },
            tasks: {
                'renewables-80': [
                    { id: 'conduct-audit', name: 'Conduct Audit', assignedTo: 'John', dueDate: '2025-08-01', recurring: 'No', status: 'In Progress' }
                ],
                'wellness-participation': [
                    { id: 'schedule-training', name: 'Schedule Training', assignedTo: 'Sarah', dueDate: '2025-09-01', recurring: 'Yes', status: 'Pending' }
                ],
                'training-coverage': [
                    { id: 'audit-compliance', name: 'Audit Compliance', assignedTo: 'Mike', dueDate: '2025-07-30', recurring: 'No', status: 'In Progress' }
                ]
            }
        };

        const parametersData = {
            Environmental: {
                energy: [
                    { name: 'Electricity Consumption from Grid', scope: 'Scope 1', unit: 'kWh', mandatory: true },
                    { name: 'Renewable Energy Consumption', scope: 'Scope 1', unit: 'kWh', mandatory: false },
                    { name: 'Natural Gas Consumption', scope: 'Scope 1', unit: 'cubic meters', mandatory: true }
                ],
                water: [
                    { name: 'Total Water Consumption', scope: 'Scope 1', unit: 'liters', mandatory: true },
                    { name: 'Recycled Water Usage', scope: 'Scope 1', unit: 'liters', mandatory: false },
                    { name: 'Water Discharge', scope: 'Scope 1', unit: 'liters', mandatory: true }
                ],
                waste: [
                    { name: 'Total Waste Generated', scope: 'Scope 1', unit: 'kg', mandatory: true },
                    { name: 'Recycled Waste', scope: 'Scope 1', unit: 'kg', mandatory: false },
                    { name: 'Hazardous Waste', scope: 'Scope 1', unit: 'kg', mandatory: true }
                ],
                biodiversity: [
                    { name: 'Land Use Impact', scope: 'Scope 1', unit: 'hectares', mandatory: false },
                    { name: 'Protected Area Investment', scope: 'Scope 1', unit: 'currency', mandatory: false }
                ]
            },
            Social: {
                employment: [
                    { name: 'Total Employees', scope: 'Organization', unit: 'count', mandatory: true },
                    { name: 'New Hires', scope: 'Organization', unit: 'count', mandatory: true }
                ],
                safety: [
                    { name: 'Workplace Accidents', scope: 'Organization', unit: 'count', mandatory: true },
                    { name: 'Safety Training Hours', scope: 'Organization', unit: 'hours', mandatory: true }
                ],
                diversity: [
                    { name: 'Gender Diversity Ratio', scope: 'Organization', unit: 'percentage', mandatory: true },
                    { name: 'Leadership Diversity', scope: 'Organization', unit: 'percentage', mandatory: false }
                ]
            },
            Governance: {
                compliance: [
                    { name: 'Compliance Training Completion', scope: 'Organization', unit: 'percentage', mandatory: true },
                    { name: 'Regulatory Violations', scope: 'Organization', unit: 'count', mandatory: true }
                ],
                transparency: [
                    { name: 'Board Independence', scope: 'Organization', unit: 'percentage', mandatory: true },
                    { name: 'ESG Disclosure Score', scope: 'Organization', unit: 'score', mandatory: false }
                ]
            }
        };

        const templateGoals = {
            Environmental: {
                energy: ['Reduce Energy Use', 'Increase Renewable Energy', 'Improve Energy Efficiency'],
                water: ['Improve Water Efficiency', 'Reduce Water Consumption', 'Increase Water Recycling'],
                waste: ['Minimize Waste Generation', 'Increase Recycling Rate', 'Eliminate Single-use Plastics'],
                biodiversity: ['Protect Biodiversity', 'Restore Natural Habitats']
            },
            Social: {
                employment: ['Enhance Employee Wellness', 'Improve Work-Life Balance', 'Increase Employee Satisfaction'],
                safety: ['Improve Workplace Safety', 'Reduce Accidents', 'Enhance Safety Training'],
                diversity: ['Improve Diversity', 'Promote Inclusion', 'Increase Female Leadership']
            },
            Governance: {
                compliance: ['Improve Compliance Training', 'Enhance Risk Management', 'Strengthen Internal Controls'],
                transparency: ['Enhance Transparency', 'Improve Stakeholder Engagement', 'Increase Disclosure Quality']
            }
        };

        // Current states
        let currentPage = 'login';
        let currentParameterCategory = 'Environmental';
        let currentParameterSubcategory = 'energy';
        let currentGoalsCategory = 'Environmental';
        let currentImplementationCategory = 'Environmental';
        let currentMonitoringCategory = 'Environmental';
        let currentReportingStandard = 'brsr';
        let currentReportingSection = 0;
        let currentDrawerType = '';

        // Navigation state tracking
        let hasLoggedIn = false;
        let hasCompletedOrganization = false;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
        });

        function initializeApp() {
            // Check if user has already completed initial setup
            hasLoggedIn = localStorage.getItem('hasLoggedIn') === 'true';
            hasCompletedOrganization = localStorage.getItem('hasCompletedOrganization') === 'true';

            if (hasLoggedIn && hasCompletedOrganization) {
                showPage('home');
            } else if (hasLoggedIn && !hasCompletedOrganization) {
                showPage('organization');
            } else {
                showPage('login');
            }
        }

        function setupEventListeners() {
            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                // Set login flag
                localStorage.setItem('hasLoggedIn', 'true');
                hasLoggedIn = true;
                
                // Check if organization details are already completed
                if (!hasCompletedOrganization) {
                    showPage('organization');
                } else {
                    showPage('home');
                }
            });

            // Organization form
            document.getElementById('orgForm').addEventListener('submit', function(e) {
                e.preventDefault();
                // Set organization flag
                localStorage.setItem('hasCompletedOrganization', 'true');
                hasCompletedOrganization = true;
                showPage('home');
            });

            // Navigation tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const pageId = this.dataset.page;
                    showPage(pageId);
                });
            });

            // Hamburger menu
            document.getElementById('hamburger').addEventListener('click', function() {
                document.getElementById('navTabs').classList.toggle('mobile-show');
            });
        }

        function showPage(pageId) {
            currentPage = pageId;
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update navigation
            updateNavigation(pageId);
            updateSidebar(pageId);
            updateMainContent(pageId);

            // Load page-specific content
            switch(pageId) {
                case 'parameters':
                    loadParametersContent();
                    break;
                case 'goals':
                    loadGoalsContent();
                    break;
                case 'implementation':
                    loadImplementationContent();
                    break;
                case 'monitoring':
                    loadMonitoringContent();
                    initializeCharts();
                    break;
                case 'reporting':
                    loadReportingContent();
                    break;
            }
        }

        function showSubPage(subPageId) {
            showPage(subPageId);
        }

        function updateNavigation(pageId) {
            // Update navigation tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.page === pageId) {
                    tab.classList.add('active');
                }
            });
        }

        function updateSidebar(pageId) {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            // Pages that need sidebar
            const sidebarPages = ['parameters', 'goals', 'implementation', 'monitoring', 'reporting'];
            
            if (sidebarPages.includes(pageId)) {
                sidebar.classList.add('static');
                mainContent.classList.add('with-sidebar');
                loadSidebarContent(pageId);
            } else {
                sidebar.classList.remove('static');
                mainContent.classList.remove('with-sidebar');
            }
        }

        function updateMainContent(pageId) {
            // Update main content based on page
            const navbar = document.querySelector('.navbar');
            if (['login', 'organization'].includes(pageId)) {
                navbar.style.display = 'none';
            } else {
                navbar.style.display = 'block';
            }
        }

        function loadSidebarContent(pageId) {
            const sidebarContent = document.getElementById('sidebarContent');
            
            switch(pageId) {
                case 'parameters':
                case 'goals':
                case 'implementation':
                    sidebarContent.innerHTML = generateCategorySidebar();
                    break;
                case 'monitoring':
                    sidebarContent.innerHTML = generateMonitoringSidebar();
                    break;
                case 'reporting':
                    sidebarContent.innerHTML = generateReportingSidebar();
                    break;
            }
        }

        function generateCategorySidebar() {
            const categories = [
                { name: 'Environmental', icon: '🌱', subcategories: ['energy', 'water', 'waste', 'biodiversity'] },
                { name: 'Social', icon: '👥', subcategories: ['employment', 'safety', 'diversity'] },
                { name: 'Governance', icon: '⚖️', subcategories: ['compliance', 'transparency'] }
            ];

            return categories.map(category => `
                <div class="sidebar-category">
                    <div class="sidebar-category-title ${currentParameterCategory === category.name ? 'active' : ''}" 
                         onclick="selectCategory('${category.name}')">
                        <div style="display: flex; align-items: center;">
                            <span class="sidebar-category-icon">${category.icon}</span>
                            ${category.name}
                        </div>
                        <span class="material-icons">expand_more</span>
                    </div>
                    <div class="sidebar-subcategories ${currentParameterCategory === category.name ? 'expanded' : ''}">
                        ${category.subcategories.map(sub => `
                            <div class="sidebar-subcategory ${getCurrentSubcategory() === sub ? 'active' : ''}" 
                                 onclick="selectSubcategory('${sub}')">
                                <span class="sidebar-subcategory-icon">⚡</span>
                                ${capitalizeFirst(sub)}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function generateMonitoringSidebar() {
            const categories = [
                { name: 'Environmental', icon: '🌱' },
                { name: 'Social', icon: '👥' },
                { name: 'Governance', icon: '⚖️' }
            ];

            return categories.map(category => `
                <div class="sidebar-category">
                    <div class="sidebar-category-title ${currentMonitoringCategory === category.name ? 'active' : ''}" 
                         onclick="selectMonitoringCategory('${category.name}')">
                        <div style="display: flex; align-items: center;">
                            <span class="sidebar-category-icon">${category.icon}</span>
                            ${category.name}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function generateReportingSidebar() {
            const reportingStandards = {
                brsr: {
                    sections: ['General Disclosures', 'Principle 1', 'Principle 2', 'Principle 3', 'Principle 4', 'Principle 5', 'Principle 6', 'Principle 7', 'Principle 8', 'Principle 9']
                },
                gri: {
                    sections: ['General Disclosures', '301 - Materials', '302 - Energy', '303 - Water', '304 - Biodiversity', '305 - Emissions', '401 - Employment', '402 - Labor Relations', '403 - Health and Safety', '405 - Diversity']
                },
                ifrs: {
                    sections: ['General Requirements', 'Climate-related Disclosures', 'Governance', 'Strategy', 'Risk Management', 'Metrics and Targets']
                }
            };

            const standard = reportingStandards[currentReportingStandard];
            if (!standard) return '';

            return standard.sections.map((section, index) => `
                <div class="sidebar-category">
                    <div class="sidebar-category-title ${currentReportingSection === index ? 'active' : ''}" 
                         onclick="selectReportingSection(${index})">
                        <div style="display: flex; align-items: center;">
                            <span class="sidebar-category-icon">📋</span>
                            ${section}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function selectCategory(category) {
            currentParameterCategory = category;
            currentGoalsCategory = category;
            currentImplementationCategory = category;
            
            if (currentPage === 'parameters') {
                // Reset to first subcategory
                const subcategories = getSubcategoriesForCategory(category);
                currentParameterSubcategory = subcategories[0];
                loadParametersContent();
            } else if (currentPage === 'goals') {
                loadGoalsContent();
            } else if (currentPage === 'implementation') {
                loadImplementationContent();
            }
            
            // Update sidebar
            loadSidebarContent(currentPage);
        }

        function selectSubcategory(subcategory) {
            currentParameterSubcategory = subcategory;
            if (currentPage === 'parameters') {
                loadParametersContent();
            } else if (currentPage === 'goals') {
                updateGoalTemplates();
            }
            loadSidebarContent(currentPage);
        }

        function selectMonitoringCategory(category) {
            currentMonitoringCategory = category;
            loadMonitoringContent();
            loadSidebarContent('monitoring');
        }

        function selectReportingSection(sectionIndex) {
            currentReportingSection = sectionIndex;
            loadReportingContent();
            loadSidebarContent('reporting');
        }

        function selectReportingStandard(standard) {
            currentReportingStandard = standard;
            currentReportingSection = 0;
            
            // Update tab appearance
            document.querySelectorAll('.report-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadReportingContent();
            loadSidebarContent('reporting');
        }

        function getCurrentSubcategory() {
            if (currentPage === 'parameters') {
                return currentParameterSubcategory;
            }
            return getSubcategoriesForCategory(currentParameterCategory)[0];
        }

        function getSubcategoriesForCategory(category) {
            const subcategoryMap = {
                'Environmental': ['energy', 'water', 'waste', 'biodiversity'],
                'Social': ['employment', 'safety', 'diversity'],
                'Governance': ['compliance', 'transparency']
            };
            return subcategoryMap[category] || [];
        }

        function capitalizeFirst(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        // Parameters functionality
        function loadParametersContent() {
            const content = document.getElementById('parametersContent');
            const subtitle = document.getElementById('categorySubtitle');
            
            subtitle.textContent = `${currentParameterCategory} - ${capitalizeFirst(currentParameterSubcategory)} Parameters`;
            
            const parameters = parametersData[currentParameterCategory][currentParameterSubcategory] || [];
            
            let parametersHTML = `
                <div class="parameter-section">
                    <h3>
                        <span class="material-icons" style="color: #28A745;">fact_check</span>
                        ${capitalizeFirst(currentParameterSubcategory)} Parameters
                    </h3>
                    <div class="parameter-list">
            `;
            
            parameters.forEach(param => {
                const isSelected = esgData.selectedParameters.some(p => p.name === param.name);
                parametersHTML += `
                    <div class="parameter-item">
                        <div class="parameter-info">
                            <div class="parameter-name">${param.name}</div>
                            <div class="parameter-details">Scope: ${param.scope} | Unit: ${param.unit}</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span class="${param.mandatory ? 'parameter-mandatory' : 'parameter-optional'}">
                                ${param.mandatory ? 'Mandatory' : 'Optional'}
                            </span>
                            <input type="checkbox" ${isSelected ? 'checked' : ''} 
                                   onchange="toggleParameter('${param.name}', '${param.scope}', '${param.unit}', ${param.mandatory}, this.checked)">
                        </div>
                    </div>
                `;
            });
            
            parametersHTML += `
                    </div>
                </div>
            `;
            
            content.innerHTML = parametersHTML;
            updateParameterNavigation();
        }

        function toggleParameter(name, scope, unit, mandatory, selected) {
            const paramIndex = esgData.selectedParameters.findIndex(p => p.name === name);
            
            if (selected && paramIndex === -1) {
                esgData.selectedParameters.push({ name, scope, unit, mandatory, category: currentParameterCategory, subcategory: currentParameterSubcategory });
            } else if (!selected && paramIndex !== -1) {
                esgData.selectedParameters.splice(paramIndex, 1);
            }
        }

        function updateParameterNavigation() {
            const categories = ['Environmental', 'Social', 'Governance'];
            const currentIndex = categories.indexOf(currentParameterCategory);
            
            const backBtn = document.getElementById('paramBackBtn');
            const nextBtn = document.getElementById('paramNextBtn');
            const indicator = document.getElementById('paramPageIndicator');

            indicator.textContent = `${currentParameterCategory} (${currentIndex + 1} of ${categories.length})`;

            if (currentIndex === 0) {
                backBtn.textContent = 'Back to Standards';
                backBtn.onclick = () => showSubPage('standards');
            } else {
                backBtn.textContent = 'Back';
                backBtn.onclick = () => navigateParameterCategory('back');
            }

            if (currentIndex === categories.length - 1) {
                nextBtn.textContent = 'Next to Baseline';
                nextBtn.onclick = () => showSubPage('baseline');
            } else {
                nextBtn.textContent = 'Next';
                nextBtn.onclick = () => navigateParameterCategory('next');
            }
        }

        function navigateParameterCategory(direction) {
            const categories = ['Environmental', 'Social', 'Governance'];
            const currentIndex = categories.indexOf(currentParameterCategory);

            if (direction === 'back' && currentIndex > 0) {
                currentParameterCategory = categories[currentIndex - 1];
            } else if (direction === 'next' && currentIndex < categories.length - 1) {
                currentParameterCategory = categories[currentIndex + 1];
            }

            // Reset to first subcategory of new category
            const subcategories = getSubcategoriesForCategory(currentParameterCategory);
            currentParameterSubcategory = subcategories[0];

            selectCategory(currentParameterCategory);
        }

        function showSelectedParameters() {
            const overlay = document.getElementById('selectedParamsOverlay');
            const drawer = document.getElementById('selectedParamsDrawer');
            const content = document.getElementById('selectedParametersContent');

            let parametersHTML = '';
            if (esgData.selectedParameters.length === 0) {
                parametersHTML = '<p style="text-align: center; color: #6C757D; margin-top: 50px;">No parameters selected yet.</p>';
            } else {
                // Group parameters by category
                const groupedParams = {};
                esgData.selectedParameters.forEach(param => {
                    if (!groupedParams[param.category]) {
                        groupedParams[param.category] = {};
                    }
                    if (!groupedParams[param.category][param.subcategory]) {
                        groupedParams[param.category][param.subcategory] = [];
                    }
                    groupedParams[param.category][param.subcategory].push(param);
                });

                Object.keys(groupedParams).forEach(category => {
                    parametersHTML += `<h3 style="margin-bottom: 15px; color: #333;">${category}</h3>`;
                    Object.keys(groupedParams[category]).forEach(subcategory => {
                        parametersHTML += `<h4 style="margin-bottom: 10px; color: #6C757D; text-transform: capitalize;">${subcategory}</h4>`;
                        parametersHTML += '<div class="parameter-list" style="margin-bottom: 20px;">';
                        groupedParams[category][subcategory].forEach(param => {
                            parametersHTML += `
                                <div class="parameter-item">
                                    <div class="parameter-info">
                                        <div class="parameter-name">${param.name}</div>
                                        <div class="parameter-details">Scope: ${param.scope} | Unit: ${param.unit}</div>
                                    </div>
                                    <span class="${param.mandatory ? 'parameter-mandatory' : 'parameter-optional'}">
                                        ${param.mandatory ? 'Mandatory' : 'Optional'}
                                    </span>
                                </div>
                            `;
                        });
                        parametersHTML += '</div>';
                    });
                });
            }

            content.innerHTML = parametersHTML;
            overlay.classList.add('active');
            drawer.classList.add('active');
        }

        function closeSelectedParams() {
            document.getElementById('selectedParamsOverlay').classList.remove('active');
            document.getElementById('selectedParamsDrawer').classList.remove('active');
        }

        function exportParameters() {
            if (esgData.selectedParameters.length === 0) {
                alert('No parameters selected to export.');
                return;
            }

            let csvContent = 'Category,Subcategory,Parameter Name,Scope,Unit,Type\n';
            esgData.selectedParameters.forEach(param => {
                csvContent += `${param.category},${param.subcategory},"${param.name}",${param.scope},${param.unit},${param.mandatory ? 'Mandatory' : 'Optional'}\n`;
            });

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'selected_esg_parameters.csv';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        // Goals functionality
        function loadGoalsContent() {
            updateGoalTemplates();
            displayGoalsByCategory();
            updateGoalsNavigation();
        }

        function updateGoalTemplates() {
            const templateSelect = document.getElementById('goalTemplate');
            const subcategories = getSubcategoriesForCategory(currentGoalsCategory);
            
            templateSelect.innerHTML = '<option value="">Select a template</option>';
            
            subcategories.forEach(subcategory => {
                const templates = templateGoals[currentGoalsCategory][subcategory] || [];
                if (templates.length > 0) {
                    templateSelect.innerHTML += `<optgroup label="${capitalizeFirst(subcategory)}">`;
                    templates.forEach(template => {
                        templateSelect.innerHTML += `<option value="${template}" data-subcategory="${subcategory}">${template}</option>`;
                    });
                    templateSelect.innerHTML += `</optgroup>`;
                }
            });
        }

        function toggleCustomGoal() {
            const customToggle = document.getElementById('customGoalToggle');
            const templateForm = document.getElementById('templateGoalForm');
            const customForm = document.getElementById('customGoalForm');
            
            if (customToggle.checked) {
                templateForm.style.display = 'none';
                customForm.style.display = 'block';
            } else {
                templateForm.style.display = 'block';
                customForm.style.display = 'none';
            }
        }

        function addGoal() {
            const customToggle = document.getElementById('customGoalToggle');
            let goalName, goalDescription, subcategory;
            
            if (customToggle.checked) {
                goalName = document.getElementById('customGoalName').value;
                goalDescription = document.getElementById('customGoalDescription').value;
                subcategory = getSubcategoriesForCategory(currentGoalsCategory)[0]; // Default to first subcategory
            } else {
                const templateSelect = document.getElementById('goalTemplate');
                const selectedOption = templateSelect.options[templateSelect.selectedIndex];
                goalName = templateSelect.value;
                goalDescription = document.getElementById('templateDescription').value;
                subcategory = selectedOption.getAttribute('data-subcategory');
            }
            
            if (!goalName) {
                alert('Please enter a goal name or select a template.');
                return;
            }
            
            const goalId = goalName.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
            
            if (!esgData.goals[currentGoalsCategory]) {
                esgData.goals[currentGoalsCategory] = [];
            }
            
            esgData.goals[currentGoalsCategory].push({
                id: goalId,
                name: goalName,
                description: goalDescription || '',
                subcategory: subcategory
            });
            
            // Clear form
            document.getElementById('goalTemplate').selectedIndex = 0;
            document.getElementById('templateDescription').value = '';
            document.getElementById('customGoalName').value = '';
            document.getElementById('customGoalDescription').value = '';
            document.getElementById('customGoalToggle').checked = false;
            toggleCustomGoal();
            
            displayGoalsByCategory();
        }

        function displayGoalsByCategory() {
            const container = document.getElementById('goalsByCategory');
            const categories = ['Environmental', 'Social', 'Governance'];
            
            let html = '';
            
            categories.forEach(category => {
                const goals = esgData.goals[category] || [];
                html += `
                    <div class="category-section">
                        <div class="category-header" onclick="toggleCategoryExpansion('${category}')">
                            <h3>${category} Goals (${goals.length})</h3>
                            <span class="material-icons">expand_more</span>
                        </div>
                        <div class="category-content ${category === currentGoalsCategory ? 'expanded' : ''}" id="category-${category}">
                `;
                
                if (goals.length === 0) {
                    html += '<p style="color: #6C757D; text-align: center; margin: 20px 0;">No goals added yet.</p>';
                } else {
                    goals.forEach(goal => {
                        html += `
                            <div class="goal-list-item">
                                <div>
                                    <div class="goal-name">${goal.name}</div>
                                    ${goal.description ? `<div class="goal-description">${goal.description}</div>` : ''}
                                    ${goal.subcategory ? `<div style="font-size: 12px; color: #28A745; margin-top: 5px;">${capitalizeFirst(goal.subcategory)}</div>` : ''}
                                </div>
                                <button class="btn btn-secondary" onclick="removeGoal('${category}', '${goal.id}')">Remove</button>
                            </div>
                        `;
                    });
                }
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function toggleCategoryExpansion(category) {
            const content = document.getElementById(`category-${category}`);
            content.classList.toggle('expanded');
        }

        function removeGoal(category, goalId) {
            if (confirm('Are you sure you want to remove this goal?')) {
                esgData.goals[category] = esgData.goals[category].filter(goal => goal.id !== goalId);
                displayGoalsByCategory();
            }
        }

        function updateGoalsNavigation() {
            const categories = ['Environmental', 'Social', 'Governance'];
            const currentIndex = categories.indexOf(currentGoalsCategory);
            
            const backBtn = document.getElementById('goalsBackBtn');
            const nextBtn = document.getElementById('goalsNextBtn');
            const indicator = document.getElementById('goalsPageIndicator');

            indicator.textContent = `${currentGoalsCategory} (${currentIndex + 1} of ${categories.length})`;

            if (currentIndex === 0) {
                backBtn.classList.add('btn-disabled');
                backBtn.onclick = null;
            } else {
                backBtn.classList.remove('btn-disabled');
                backBtn.onclick = () => navigateGoalsCategory('back');
            }

            if (currentIndex === categories.length - 1) {
                nextBtn.classList.add('btn-disabled');
                nextBtn.onclick = null;
            } else {
                nextBtn.classList.remove('btn-disabled');
                nextBtn.onclick = () => navigateGoalsCategory('next');
            }
        }

        function navigateGoalsCategory(direction) {
            const categories = ['Environmental', 'Social', 'Governance'];
            const currentIndex = categories.indexOf(currentGoalsCategory);

            if (direction === 'back' && currentIndex > 0) {
                currentGoalsCategory = categories[currentIndex - 1];
            } else if (direction === 'next' && currentIndex < categories.length - 1) {
                currentGoalsCategory = categories[currentIndex + 1];
            }

            selectCategory(currentGoalsCategory);
        }

        // Implementation functionality
        function loadImplementationContent() {
            const content = document.getElementById('implementationContent');
            const categoryGoals = esgData.goals[currentImplementationCategory] || [];
            
            let implementationHTML = '';
            
            if (categoryGoals.length === 0) {
                implementationHTML = `
                    <div class="card text-center" style="padding: 40px;">
                        <h3 style="color: #6C757D; margin-bottom: 15px;">No Goals Found</h3>
                        <p style="color: #6C757D;">No goals have been set for ${currentImplementationCategory} category yet.</p>
                        <button class="btn btn-primary" onclick="showPage('goals')" style="margin-top: 20px;">Set Goals</button>
                    </div>
                `;
            } else {
                implementationHTML = '<h2 style="margin-bottom: 20px;">Goals Overview</h2>';
                
                categoryGoals.forEach((goal, goalIndex) => {
                    const initiatives = esgData.initiatives[goal.id] || [];
                    const progress = Math.floor(Math.random() * 100); // Mock progress
                    
                    implementationHTML += `
                        <div class="implementation-goal">
                            <div class="implementation-goal-header" onclick="toggleGoalExpansion('${goal.id}')">
                                <div class="goal-progress-container">
                                    <div class="goal-title-text">
                                        <h3 style="margin: 0; color: #333;">${goal.name}</h3>
                                        <p style="margin: 5px 0 0 0; color: #6C757D; font-size: 14px;">${goal.description}</p>
                                    </div>
                                    <div class="goal-progress-bar">
                                        <div class="goal-progress-fill" style="width: ${progress}%;"></div>
                                    </div>
                                    <span class="goal-progress-text">${progress}%</span>
                                </div>
                                <button class="btn btn-primary" onclick="event.stopPropagation(); openDrawer('initiative', '${goal.id}')">
                                    <span class="material-icons" style="font-size: 16px;">add</span>
                                    Add Initiative
                                </button>
                            </div>
                            <div class="implementation-goal-content" id="goal-${goal.id}">
                `;
                
                if (initiatives.length === 0) {
                    implementationHTML += '<p style="color: #6C757D; text-align: center; margin: 20px 0;">No initiatives added yet.</p>';
                } else {
                    initiatives.forEach(initiative => {
                        const targets = esgData.targets[initiative.id] || [];
                        implementationHTML += `
                            <div class="initiative-item">
                                <div class="item-header">
                                    <div>
                                        <div class="item-name">${initiative.name}</div>
                                        <div style="font-size: 14px; color: #6C757D; margin-top: 5px;">${initiative.description}</div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <span class="item-status status-${initiative.status.toLowerCase().replace(' ', '-')}">${initiative.status}</span>
                                        <button class="btn btn-secondary" onclick="openDrawer('target', '${initiative.id}')">
                                            <span class="material-icons" style="font-size: 14px;">add</span>
                                            Add Target
                                        </button>
                                    </div>
                                </div>
                `;
                
                if (targets.length > 0) {
                    targets.forEach(target => {
                        const tasks = esgData.tasks[target.id] || [];
                        implementationHTML += `
                            <div class="target-item" style="margin-left: 20px; margin-top: 15px;">
                                <div class="item-header">
                                    <div>
                                        <div class="item-name">${target.name}</div>
                                        <div style="font-size: 12px; color: #6C757D; margin-top: 3px;">
                                            Tracking: ${target.tracking} | ${target.action}: ${target.value} by ${target.year}
                                        </div>
                                    </div>
                                    <button class="btn btn-secondary" onclick="openDrawer('task', '${target.id}')">
                                        <span class="material-icons" style="font-size: 14px;">add</span>
                                        Add Task
                                    </button>
                                </div>
                `;
                
                if (tasks.length > 0) {
                    tasks.forEach(task => {
                        implementationHTML += `
                            <div class="task-item" style="margin-left: 20px; margin-top: 10px;">
                                <div class="item-header">
                                    <div>
                                        <div class="item-name">${task.name}</div>
                                        <div style="font-size: 12px; color: #6C757D; margin-top: 3px;">
                                            Assigned: ${task.assignedTo} | Due: ${task.dueDate} | Recurring: ${task.recurring}
                                        </div>
                                    </div>
                                    <span class="item-status status-${task.status.toLowerCase().replace(' ', '-')}">${task.status}</span>
                                </div>
                            </div>
                        `;
                    });
                }
                
                implementationHTML += `
                            </div>
                        `;
                    });
                }
                
                implementationHTML += `
                            </div>
                        `;
                    });
                }
                
                implementationHTML += `
                        </div>
                    </div>
                `;
            });
        }

        content.innerHTML = implementationHTML;
        updateImplementationNavigation();
    }

    function toggleGoalExpansion(goalId) {
        const content = document.getElementById(`goal-${goalId}`);
        if (content) {
            content.classList.toggle('expanded');
        }
    }

    function updateImplementationNavigation() {
        const categories = ['Environmental', 'Social', 'Governance'];
        const currentIndex = categories.indexOf(currentImplementationCategory);
        
        const backBtn = document.getElementById('implBackBtn');
        const nextBtn = document.getElementById('implNextBtn');
        const indicator = document.getElementById('implPageIndicator');

        indicator.textContent = `${currentImplementationCategory} (${currentIndex + 1} of ${categories.length})`;

        if (currentIndex === 0) {
            backBtn.classList.add('btn-disabled');
            backBtn.onclick = null;
        } else {
            backBtn.classList.remove('btn-disabled');
            backBtn.onclick = () => navigateImplementationGoals('back');
        }

        if (currentIndex === categories.length - 1) {
            nextBtn.classList.add('btn-disabled');
            nextBtn.onclick = null;
        } else {
            nextBtn.classList.remove('btn-disabled');
            nextBtn.onclick = () => navigateImplementationGoals('next');
        }
    }

    function navigateImplementationGoals(direction) {
        const categories = ['Environmental', 'Social', 'Governance'];
        const currentIndex = categories.indexOf(currentImplementationCategory);

        if (direction === 'back' && currentIndex > 0) {
            currentImplementationCategory = categories[currentIndex - 1];
        } else if (direction === 'next' && currentIndex < categories.length - 1) {
            currentImplementationCategory = categories[currentIndex + 1];
        }

        selectCategory(currentImplementationCategory);
    }

    function loadBaselineContent() {
        const container = document.getElementById('baselineParameters');
        let parametersHTML = '';

        // Get all selected parameters
        Object.keys(parametersData).forEach(category => {
            Object.keys(parametersData[category]).forEach(subcat => {
                parametersData[category][subcat].forEach(param => {
                    parametersHTML += `
                        <div class="form-group">
                            <label>${param.name} (${param.unit})</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="number" placeholder="Enter value" style="flex: 1;">
                                <input type="text" value="${param.scope}" readonly style="flex: 0 0 120px; background: #F8F9FA;">
                                <input type="text" value="${param.unit}" readonly style="flex: 0 0 80px; background: #F8F9FA;">
                            </div>
                        </div>
                    `;
                });
            });
        });

        container.innerHTML = parametersHTML;
    }

    function loadMonitoringContent() {
        const kpiGrid = document.getElementById('kpiGrid');
        const categoryTitle = document.getElementById('selectedCategoryTitle');
        
        categoryTitle.textContent = `${currentMonitoringCategory} Metrics`;

        const kpiData = {
            Environmental: [
                { title: 'Energy Reduction', value: '15%', status: 'success' },
                { title: 'Water Savings', value: '12%', status: 'success' },
                { title: 'Waste Reduction', value: '8%', status: 'warning' },
                { title: 'Carbon Footprint', value: '22%', status: 'success' }
            ],
            Social: [
                { title: 'Employee Satisfaction', value: '85%', status: 'success' },
                { title: 'Safety Incidents', value: '3', status: 'warning' },
                { title: 'Training Hours', value: '240', status: 'success' },
                { title: 'Diversity Index', value: '68%', status: 'warning' }
            ],
            Governance: [
                { title: 'Compliance Score', value: '92%', status: 'success' },
                { title: 'Board Independence', value: '75%', status: 'success' },
                { title: 'Risk Assessments', value: '100%', status: 'success' },
                { title: 'Policy Updates', value: '4', status: 'warning' }
            ]
        };

        const kpis = kpiData[currentMonitoringCategory] || [];
        
        let kpiHTML = '';
        kpis.forEach(kpi => {
            kpiHTML += `
                <div class="kpi-card">
                    <div class="kpi-value ${kpi.status}">${kpi.value}</div>
                    <div class="kpi-label">${kpi.title}</div>
                </div>
            `;
        });
        
        kpiGrid.innerHTML = kpiHTML;
    }

    function loadReportingContent() {
        const reportingStandards = {
            brsr: {
                sections: [
                    'General Disclosures', 'Principle 1 - Ethics & Governance', 'Principle 2 - Product Lifecycle', 
                    'Principle 3 - Employee Wellbeing', 'Principle 4 - Stakeholder Engagement', 'Principle 5 - Human Rights',
                    'Principle 6 - Environment', 'Principle 7 - Public Policy', 'Principle 8 - Inclusive Growth', 'Principle 9 - Customer Value'
                ]
            },
            gri: {
                sections: [
                    'General Disclosures', '301 - Materials', '302 - Energy', '303 - Water and Effluents', 
                    '304 - Biodiversity', '305 - Emissions', '401 - Employment', '402 - Labor/Management Relations',
                    '403 - Occupational Health and Safety', '405 - Diversity and Equal Opportunity'
                ]
            },
            ifrs: {
                sections: [
                    'General Requirements', 'Climate-related Disclosures', 'Governance', 
                    'Strategy', 'Risk Management', 'Metrics and Targets'
                ]
            }
        };

        const currentStandard = reportingStandards[currentReportingStandard];
        const sectionTitle = document.getElementById('reportSectionTitle');
        const reportingFields = document.getElementById('reportingFields');
        
        if (!currentStandard) return;
        
        const sectionName = currentStandard.sections[currentReportingSection];
        sectionTitle.textContent = `${currentReportingStandard.toUpperCase()} - ${sectionName}`;
        
        // Mock form fields for reporting
        let fieldsHTML = `
            <div class="form-group">
                <label>Organization Name</label>
                <input type="text" placeholder="Enter organization name">
            </div>
            <div class="form-group">
                <label>Reporting Period</label>
                <input type="text" placeholder="e.g., FY 2024-25">
            </div>
            <div class="form-group">
                <label>Primary Activities</label>
                <textarea placeholder="Describe primary business activities"></textarea>
            </div>
            <div class="form-group">
                <label>Key Metrics</label>
                <textarea placeholder="Enter key sustainability metrics for this section"></textarea>
            </div>
        `;
        
        reportingFields.innerHTML = fieldsHTML;
        updateReportingNavigation();
    }

    function updateReportingNavigation() {
        const reportingStandards = {
            brsr: { sections: 10 },
            gri: { sections: 10 },
            ifrs: { sections: 6 }
        };

        const totalSections = reportingStandards[currentReportingStandard].sections;
        
        const backBtn = document.getElementById('reportBackBtn');
        const nextBtn = document.getElementById('reportNextBtn');
        const indicator = document.getElementById('reportPageIndicator');

        indicator.textContent = `${currentReportingSection + 1} of ${totalSections}`;

        if (currentReportingSection === 0) {
            backBtn.classList.add('btn-disabled');
            backBtn.onclick = null;
        } else {
            backBtn.classList.remove('btn-disabled');
            backBtn.onclick = () => navigateReportingSections('back');
        }

        if (currentReportingSection === totalSections - 1) {
            nextBtn.classList.add('btn-disabled');
            nextBtn.onclick = null;
        } else {
            nextBtn.classList.remove('btn-disabled');
            nextBtn.onclick = () => navigateReportingSections('next');
        }
    }

    function navigateReportingSections(direction) {
        const reportingStandards = {
            brsr: { sections: 10 },
            gri: { sections: 10 },
            ifrs: { sections: 6 }
        };

        const totalSections = reportingStandards[currentReportingStandard].sections;

        if (direction === 'back' && currentReportingSection > 0) {
            currentReportingSection--;
        } else if (direction === 'next' && currentReportingSection < totalSections - 1) {
            currentReportingSection++;
        }

        selectReportingSection(currentReportingSection);
    }

    function downloadReport() {
        const formats = ['PDF', 'CSV', 'Word'];
        const format = prompt(`Select download format:\n1. PDF\n2. CSV\n3. Word\n\nEnter 1, 2, or 3:`);
        
        let selectedFormat;
        switch(format) {
            case '1': selectedFormat = 'PDF'; break;
            case '2': selectedFormat = 'CSV'; break;
            case '3': selectedFormat = 'Word'; break;
            default: selectedFormat = 'PDF';
        }
        
        alert(`Report download started in ${selectedFormat} format! (This is a mock download)`);
    }

    // Slide Drawer functionality
    function openDrawer(type, parentId = null) {
        currentDrawerType = type;
        const overlay = document.getElementById('drawerOverlay');
        const drawer = document.getElementById('addDrawer');
        const title = document.getElementById('drawerTitle');
        const fields = document.getElementById('drawerFields');
        
        title.textContent = `Add ${capitalizeFirst(type)}`;
        
        let fieldsHTML = '';
        
        switch(type) {
            case 'initiative':
                fieldsHTML = `
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="drawer-name" placeholder="Enter initiative name">
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="drawer-description" placeholder="Enter description"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="drawer-status">
                            <option value="Pending">Pending</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Completed">Completed</option>
                        </select>
                    </div>
                    <input type="hidden" id="drawer-parent" value="${parentId}">
                `;
                break;
                
            case 'target':
                // Get available initiatives for the dropdown
                const initiatives = [];
                Object.keys(esgData.initiatives).forEach(goalId => {
                    esgData.initiatives[goalId].forEach(initiative => {
                        initiatives.push({ id: initiative.id, name: initiative.name });
                    });
                });
                
                fieldsHTML = `
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="drawer-name" placeholder="Enter target name">
                    </div>
                    <div class="form-group">
                        <label>Initiative</label>
                        <select id="drawer-initiative">
                            ${initiatives.map(init => 
                                `<option value="${init.id}" ${init.id === parentId ? 'selected' : ''}>${init.name}</option>`
                            ).join('')}
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Level</label>
                        <select id="drawer-level">
                            <option value="Organization">Organization</option>
                            <option value="Facility">Facility</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Tracking</label>
                        <select id="drawer-tracking">
                            <option value="Monthly Report">Monthly Report</option>
                            <option value="Weekly Report">Weekly Report</option>
                            <option value="Quarterly Report">Quarterly Report</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Action</label>
                        <select id="drawer-action">
                            <option value="Reduce">Reduce</option>
                            <option value="Increase">Increase</option>
                            <option value="Percentage Reduction">Percentage Reduction</option>
                            <option value="Percentage Increase">Percentage Increase</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Value</label>
                        <input type="text" id="drawer-value" placeholder="e.g., 20%, 1000 units">
                    </div>
                    <div class="form-group">
                        <label>Completion Year</label>
                        <input type="number" id="drawer-year" min="2025" max="2035" placeholder="2025">
                    </div>
                    <input type="hidden" id="drawer-parent" value="${parentId}">
                `;
                break;
                
            case 'task':
                fieldsHTML = `
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="drawer-name" placeholder="Enter task name">
                    </div>
                    <div class="form-group">
                        <label>Assigned To</label>
                        <input type="text" id="drawer-assigned" placeholder="Enter assignee name">
                    </div>
                    <div class="form-group">
                        <label>Due Date</label>
                        <input type="date" id="drawer-date">
                    </div>
                    <div class="form-group">
                        <label>Recurring</label>
                        <select id="drawer-recurring">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="drawer-status">
                            <option value="Pending">Pending</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Completed">Completed</option>
                        </select>
                    </div>
                    <input type="hidden" id="drawer-parent" value="${parentId}">
                `;
                break;
        }
        
        fields.innerHTML = fieldsHTML;
        overlay.classList.add('active');
        drawer.classList.add('active');
    }

    function closeDrawer() {
        document.getElementById('drawerOverlay').classList.remove('active');
        document.getElementById('addDrawer').classList.remove('active');
    }

    function saveDrawerItem() {
        const name = document.getElementById('drawer-name')?.value;
        const parentId = document.getElementById('drawer-parent')?.value;
        
        if (!name) {
            alert('Please enter a name.');
            return;
        }
        
        const id = name.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
        
        switch(currentDrawerType) {
            case 'initiative':
                const description = document.getElementById('drawer-description').value;
                const status = document.getElementById('drawer-status').value;
                
                if (!esgData.initiatives[parentId]) {
                    esgData.initiatives[parentId] = [];
                }
                
                esgData.initiatives[parentId].push({
                    id: id,
                    name: name,
                    description: description,
                    status: status
                });
                break;
                
            case 'target':
                const initiative = document.getElementById('drawer-initiative').value;
                const level = document.getElementById('drawer-level').value;
                const tracking = document.getElementById('drawer-tracking').value;
                const action = document.getElementById('drawer-action').value;
                const value = document.getElementById('drawer-value').value;
                const year = document.getElementById('drawer-year').value;
                
                if (!esgData.targets[initiative]) {
                    esgData.targets[initiative] = [];
                }
                
                esgData.targets[initiative].push({
                    id: id,
                    name: name,
                    initiative: initiative,
                    level: level,
                    tracking: tracking,
                    action: action,
                    value: value,
                    year: year
                });
                break;
                
            case 'task':
                const assignedTo = document.getElementById('drawer-assigned').value;
                const dueDate = document.getElementById('drawer-date').value;
                const recurring = document.getElementById('drawer-recurring').value;
                const taskStatus = document.getElementById('drawer-status').value;
                
                if (!esgData.tasks[parentId]) {
                    esgData.tasks[parentId] = [];
                }
                
                esgData.tasks[parentId].push({
                    id: id,
                    name: name,
                    assignedTo: assignedTo,
                    dueDate: dueDate,
                    recurring: recurring,
                    status: taskStatus
                });
                break;
        }
        
        closeDrawer();
        loadImplementationContent();
    }

    // Charts initialization
    function initializeCharts() {
        // Trend Chart
        const trendCtx = document.getElementById('trendChart').getContext('2d');
        new Chart(trendCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Progress %',
                    data: [45, 52, 58, 65, 72, 78],
                    borderColor: '#28A745',
                    backgroundColor: 'rgba(40, 167, 69, 0.1)',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });

        // Progress Chart
        const progressCtx = document.getElementById('progressChart').getContext('2d');
        new Chart(progressCtx, {
            type: 'doughnut',
            data: {
                labels: ['Completed', 'In Progress', 'Pending'],
                datasets: [{
                    data: [45, 35, 20],
                    backgroundColor: ['#28A745', '#FFC107', '#DC3545']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });
    }

    // Navigation helper functions
    function navigateToGoal(category, goalId) {
        currentImplementationCategory = category;
        showPage('implementation');
    }
    </script>
</body>
</html>