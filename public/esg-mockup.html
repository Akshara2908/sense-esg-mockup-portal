<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESG Management Portal - Helix Sense</title>
    <!-- Updated: July 21, 2025 - Enhanced ESG Mockup with Static Sidebar and Navigation Flow -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', 'Open Sans', sans-serif;
            background-color: #F5F5F5;
            color: #333333;
            line-height: 1.6;
        }

        /* Navigation */
        .navbar {
            background-color: #E0E0E0;
            padding: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 60px;
        }

        .nav-header {
            background-color: #28A745;
            color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 50px;
        }

        .nav-tabs {
            display: flex;
            background-color: #E0E0E0;
            height: 50px;
            overflow-x: auto;
        }

        .nav-tab {
            padding: 15px 20px;
            cursor: pointer;
            border: none;
            background: none;
            color: #6C757D;
            font-weight: 500;
            white-space: nowrap;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .nav-tab:hover {
            background-color: #DEE2E6;
        }

        .nav-tab.active {
            background-color: #28A745;
            color: white;
            border-bottom-color: #1E7E34;
        }

        .hamburger {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6C757D;
        }

        /* Static Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 60px;
            width: 250px;
            height: calc(100vh - 60px);
            background-color: #E0E0E0;
            z-index: 999;
            overflow-y: auto;
            border-right: 1px solid #DEE2E6;
            display: none;
        }

        .sidebar.static {
            display: block;
        }

        .sidebar-content {
            padding: 20px;
        }

        .sidebar-category {
            margin-bottom: 15px;
        }

        .sidebar-category-title {
            font-weight: 600;
            color: #333333;
            padding: 10px 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .sidebar-category-title.active {
            color: #28A745;
        }

        .sidebar-category-title:hover {
            color: #28A745;
        }

        .sidebar-category-icon {
            margin-right: 10px;
            font-size: 18px;
        }

        .sidebar-subcategories {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .sidebar-subcategories.expanded {
            max-height: 300px;
        }

        .sidebar-subcategory {
            padding: 8px 0 8px 20px;
            cursor: pointer;
            color: #6C757D;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
        }

        .sidebar-subcategory:hover,
        .sidebar-subcategory.active {
            color: #28A745;
            font-weight: 500;
        }

        .sidebar-subcategory-icon {
            margin-right: 8px;
            font-size: 16px;
        }

        /* Main Content */
        .main-content {
            margin-top: 60px;
            padding: 30px;
            min-height: calc(100vh - 60px);
            transition: margin-left 0.3s ease;
        }

        .main-content.with-sidebar {
            margin-left: 270px;
        }

        /* Page Containers */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Login Page */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #F5F5F5;
        }

        .login-form {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }

        .login-form h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #333333;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333333;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #DEE2E6;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #28A745;
            box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.2);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background-color: #28A745;
            color: white;
        }

        .btn-primary:hover {
            background-color: #1E7E34;
        }

        .btn-secondary {
            background-color: #DEE2E6;
            color: #333333;
        }

        .btn-secondary:hover {
            background-color: #CED4DA;
        }

        .btn-disabled {
            background-color: #6C757D !important;
            color: #DEE2E6 !important;
            cursor: not-allowed !important;
        }

        .btn-disabled:hover {
            background-color: #6C757D !important;
        }

        .btn-full {
            width: 100%;
        }

        .page-indicator {
            text-align: center;
            margin: 10px 0;
            font-size: 12px;
            color: #6C757D;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #DEE2E6;
        }

        .navigation-buttons .btn {
            min-width: 100px;
        }

        .hint {
            text-align: center;
            margin-top: 15px;
            color: #6C757D;
            font-size: 12px;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .card-header {
            border-bottom: 1px solid #DEE2E6;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #333333;
            margin-bottom: 5px;
        }

        .card-subtitle {
            font-size: 14px;
            color: #6C757D;
        }

        /* Progress Bars */
        .progress {
            background-color: #DEE2E6;
            border-radius: 10px;
            height: 8px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: #28A745;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .progress-bar.warning {
            background-color: #FFC107;
        }

        .progress-bar.danger {
            background-color: #DC3545;
        }

        /* Grid Layouts */
        .grid {
            display: grid;
            gap: 20px;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        /* Tables */
        .table-container {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #DEE2E6;
        }

        .table th {
            background-color: #F8F9FA;
            font-weight: 600;
            color: #333333;
        }

        .table tr:hover {
            background-color: #F8F9FA;
        }

        /* Badges */
        .badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .badge-mandatory {
            background-color: #DC3545;
            color: white;
        }

        .badge-voluntary {
            background-color: #007BFF;
            color: white;
        }

        .badge-completed {
            background-color: #28A745;
            color: white;
        }

        .badge-in-progress {
            background-color: #FFC107;
            color: #333333;
        }

        .badge-pending {
            background-color: #6C757D;
            color: white;
        }

        /* Expandable Sections */
        .expandable {
            border: 1px solid #DEE2E6;
            border-radius: 8px;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .expandable-header {
            padding: 15px;
            background-color: #F8F9FA;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s ease;
        }

        .expandable-header:hover {
            background-color: #E9ECEF;
        }

        .expandable-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background-color: white;
        }

        .expandable-content.expanded {
            max-height: 1000px;
        }

        .expandable-content-inner {
            padding: 15px;
        }

        /* Slide Drawer */
        .slide-drawer {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            transition: right 0.3s ease;
            z-index: 1002;
            overflow-y: auto;
        }

        .slide-drawer.open {
            right: 0;
        }

        .slide-drawer-header {
            padding: 20px;
            border-bottom: 1px solid #DEE2E6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .slide-drawer-content {
            padding: 20px;
        }

        .drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .drawer-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Utility Classes */
        .flex {
            display: flex;
        }

        .justify-between {
            justify-content: space-between;
        }

        .justify-center {
            justify-content: center;
        }

        .align-center {
            align-items: center;
        }

        .gap-10 {
            gap: 10px;
        }

        .mb-10 {
            margin-bottom: 10px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .text-center {
            text-align: center;
        }

        /* Planning Steps */
        .planning-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .planning-step {
            flex: 1;
            min-width: 200px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .planning-step:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .planning-step.completed {
            border-color: #28A745;
        }

        .planning-step.in-progress {
            border-color: #FFC107;
        }

        .planning-step.pending {
            border-color: #6C757D;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: 600;
            color: white;
        }

        .completed .step-number {
            background-color: #28A745;
        }

        .in-progress .step-number {
            background-color: #FFC107;
        }

        .pending .step-number {
            background-color: #6C757D;
        }

        .step-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .step-status {
            font-size: 12px;
            color: #6C757D;
            text-transform: uppercase;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #333333;
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Checkbox styling */
        .checkbox-group {
            margin: 20px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #DEE2E6;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .checkbox-item:hover {
            background-color: #F8F9FA;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        /* Report Tabs */
        .report-tabs {
            display: flex;
            background-color: #F8F9FA;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .report-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: none;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .report-tab.active {
            background-color: #28A745;
            color: white;
        }

        .report-tab:hover:not(.active) {
            background-color: #E9ECEF;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }

            .nav-tabs {
                display: none;
            }

            .nav-tabs.mobile-show {
                display: flex;
                flex-direction: column;
                position: absolute;
                top: 60px;
                left: 0;
                right: 0;
                background: #E0E0E0;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }

            .sidebar {
                left: -250px;
                transition: left 0.3s ease;
            }

            .sidebar.mobile-show {
                left: 0;
            }

            .main-content.with-sidebar {
                margin-left: 30px;
            }

            .planning-steps {
                flex-direction: column;
            }

            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-header">
            <div style="display: flex; align-items: center;">
                <span class="material-icons" style="margin-right: 10px;">eco</span>
                <span style="font-weight: 600;">Helix Sense ESG Portal</span>
            </div>
            <div style="display: flex; align-items: center; gap: 15px;">
                <span>Welcome, Admin</span>
                <button class="btn" style="background: rgba(255,255,255,0.2); color: white; padding: 6px 12px; font-size: 12px;" onclick="logout()">
                    <span class="material-icons" style="font-size: 16px; margin-right: 4px;">logout</span>
                    Logout
                </button>
            </div>
        </div>
        <div class="nav-tabs" id="navTabs">
            <button class="nav-tab active" data-page="home">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">home</span>
                Home
            </button>
            <button class="nav-tab" data-page="planning">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">timeline</span>
                Planning
            </button>
            <button class="nav-tab" data-page="implementation">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">build</span>
                Implementation
            </button>
            <button class="nav-tab" data-page="monitoring">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">bar_chart</span>
                Monitoring
            </button>
            <button class="nav-tab" data-page="reporting">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">description</span>
                Reporting
            </button>
            <button class="nav-tab" data-page="esg-ai">
                <span class="material-icons" style="font-size: 18px; margin-right: 5px;">psychology</span>
                ESG AI
            </button>
        </div>
        <button class="hamburger" id="hamburger">
            <span class="material-icons">menu</span>
        </button>
    </nav>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-content" id="sidebarContent">
            <!-- Dynamic content based on current page -->
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        
        <!-- Login Page -->
        <div class="page active" id="login">
            <div class="login-container">
                <form class="login-form" id="loginForm">
                    <h2>ESG Portal Login</h2>
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Login</button>
                    <div class="hint">Enter any credentials to login</div>
                </form>
            </div>
        </div>

        <!-- Organization Details Page -->
        <div class="page" id="organization">
            <div class="login-container">
                <form class="login-form" id="orgForm" style="max-width: 500px;">
                    <h2>Organization Details</h2>
                    <div class="form-group">
                        <label for="orgName">Organization Name</label>
                        <input type="text" id="orgName" name="orgName" required>
                    </div>
                    <div class="form-group">
                        <label for="location">Location</label>
                        <select id="location" name="location" required>
                            <option value="">Select Country</option>
                            <option value="IN">India</option>
                            <option value="US">United States</option>
                            <option value="UK">United Kingdom</option>
                            <option value="DE">Germany</option>
                            <option value="FR">France</option>
                            <option value="JP">Japan</option>
                            <option value="CN">China</option>
                            <option value="AU">Australia</option>
                            <option value="CA">Canada</option>
                            <option value="BR">Brazil</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="employees">Number of Employees</label>
                        <input type="number" id="employees" name="employees" min="1" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Submit</button>
                </form>
            </div>
        </div>

        <!-- Home Page -->
        <div class="page" id="home">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">ESG Dashboard</h1>
            
            <!-- Key Metrics -->
            <div class="grid grid-4 mb-20">
                <div class="card text-center">
                    <div class="card-title" style="color: #28A745; font-size: 24px;">12</div>
                    <div class="card-subtitle">Active Goals</div>
                </div>
                <div class="card text-center">
                    <div class="card-title" style="color: #FFC107; font-size: 24px;">67%</div>
                    <div class="card-subtitle">Average Progress</div>
                </div>
                <div class="card text-center">
                    <div class="card-title" style="color: #007BFF; font-size: 24px;">8</div>
                    <div class="card-subtitle">Active Initiatives</div>
                </div>
                <div class="card text-center">
                    <div class="card-title" style="color: #DC3545; font-size: 24px;">3</div>
                    <div class="card-subtitle">Behind Schedule</div>
                </div>
            </div>

            <!-- Goals Overview -->
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Environmental Goals</div>
                    </div>
                    <div class="goal-item" data-goal="reduce-energy" style="margin-bottom: 20px; cursor: pointer;" onclick="navigateToGoal('Environmental', 'reduce-energy')">
                        <div class="flex justify-between align-center mb-10">
                            <span style="color: #28A745; text-decoration: underline;">Reduce Energy Use</span>
                            <span style="font-weight: 600;">75%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar" style="width: 75%;"></div>
                        </div>
                    </div>
                    <div class="goal-item" data-goal="water-efficiency" style="margin-bottom: 20px; cursor: pointer;" onclick="navigateToGoal('Environmental', 'water-efficiency')">
                        <div class="flex justify-between align-center mb-10">
                            <span style="color: #28A745; text-decoration: underline;">Improve Water Efficiency</span>
                            <span style="font-weight: 600;">85%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar" style="width: 85%;"></div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Social Goals</div>
                    </div>
                    <div class="goal-item" style="margin-bottom: 20px; cursor: pointer;" onclick="navigateToGoal('Social', 'employee-wellness')">
                        <div class="flex justify-between align-center mb-10">
                            <span style="color: #28A745; text-decoration: underline;">Enhance Employee Wellness</span>
                            <span style="font-weight: 600;">60%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar" style="width: 60%;"></div>
                        </div>
                    </div>
                    <div class="goal-item" style="margin-bottom: 20px; cursor: pointer;" onclick="navigateToGoal('Social', 'diversity')">
                        <div class="flex justify-between align-center mb-10">
                            <span style="color: #28A745; text-decoration: underline;">Improve Diversity</span>
                            <span style="font-weight: 600;">45%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar warning" style="width: 45%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="card mt-20">
                <div class="card-header">
                    <div class="card-title">Recent Activity</div>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Activity</th>
                                <th>Category</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2025-01-15</td>
                                <td>Energy Audit Completed</td>
                                <td>Environmental</td>
                                <td><span class="badge badge-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2025-01-14</td>
                                <td>Diversity Training Started</td>
                                <td>Social</td>
                                <td><span class="badge badge-in-progress">In Progress</span></td>
                            </tr>
                            <tr>
                                <td>2025-01-13</td>
                                <td>Compliance Review</td>
                                <td>Governance</td>
                                <td><span class="badge badge-pending">Pending</span></td>
                            </tr>
                            <tr>
                                <td>2025-01-12</td>
                                <td>Water Usage Report</td>
                                <td>Environmental</td>
                                <td><span class="badge badge-completed">Completed</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Planning Page -->
        <div class="page" id="planning">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">ESG Planning Steps</h1>
            
            <div class="planning-steps">
                <div class="planning-step completed" data-step="standards">
                    <div class="step-number">1</div>
                    <div class="step-title">Standards Selection</div>
                    <div class="step-status">Completed</div>
                </div>
                <div class="planning-step in-progress" data-step="parameters">
                    <div class="step-number">2</div>
                    <div class="step-title">Parameter Selection</div>
                    <div class="step-status">In Progress</div>
                </div>
                <div class="planning-step pending" data-step="baseline">
                    <div class="step-number">3</div>
                    <div class="step-title">Baseline Data Entry</div>
                    <div class="step-status">Pending</div>
                </div>
                <div class="planning-step pending" data-step="goals">
                    <div class="step-number">4</div>
                    <div class="step-title">Goal Setting</div>
                    <div class="step-status">Pending</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Current Step: Parameter Selection</div>
                    <div class="card-subtitle">Select the parameters that align with your organization's ESG objectives</div>
                </div>
                <p>Click on any step above to navigate to that specific planning phase. Your progress will be automatically saved.</p>
                <div class="mt-20">
                    <button class="btn btn-primary" onclick="showSubPage('parameters')">Continue to Parameter Selection</button>
                </div>
            </div>
        </div>

        <!-- Standards Selection Sub-page -->
        <div class="page" id="standards">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">Standards Selection</h1>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Available ESG Standards</div>
                    <div class="card-subtitle">Select the standards that apply to your organization</div>
                </div>
                
                <div class="expandable">
                    <div class="expandable-header" onclick="toggleExpandable(this)">
                        <div class="flex align-center gap-10">
                            <input type="checkbox" checked>
                            <span style="font-weight: 600;">BRSR (Business Responsibility & Sustainability Reporting)</span>
                            <span class="badge badge-mandatory">Mandatory</span>
                            <span class="tooltip">
                                <span class="material-icons" style="font-size: 16px; color: #6C757D;">info</span>
                                <span class="tooltip-text">BRSR is mandatory for top 1000 listed companies in India</span>
                            </span>
                        </div>
                        <span class="material-icons">expand_more</span>
                    </div>
                    <div class="expandable-content">
                        <div class="expandable-content-inner">
                            <p>The Business Responsibility and Sustainability Reporting (BRSR) is a comprehensive framework mandated by SEBI for the top 1000 listed companies in India.</p>
                            <p><strong>Coverage:</strong> 9 principles covering environmental, social, and governance aspects</p>
                        </div>
                    </div>
                </div>

                <div class="expandable">
                    <div class="expandable-header" onclick="toggleExpandable(this)">
                        <div class="flex align-center gap-10">
                            <input type="checkbox">
                            <span style="font-weight: 600;">GRI (Global Reporting Initiative)</span>
                            <span class="badge badge-voluntary">Voluntary</span>
                            <span class="tooltip">
                                <span class="material-icons" style="font-size: 16px; color: #6C757D;">info</span>
                                <span class="tooltip-text">GRI is the most widely used global standard for sustainability reporting</span>
                            </span>
                        </div>
                        <span class="material-icons">expand_more</span>
                    </div>
                    <div class="expandable-content">
                        <div class="expandable-content-inner">
                            <p>GRI Standards are the most widely used global standards for sustainability reporting, providing a comprehensive framework for organizations to report their impacts.</p>
                            <p><strong>Coverage:</strong> Universal standards plus topic-specific standards for economic, environmental, and social impacts</p>
                        </div>
                    </div>
                </div>

                <div class="expandable">
                    <div class="expandable-header" onclick="toggleExpandable(this)">
                        <div class="flex align-center gap-10">
                            <input type="checkbox">
                            <span style="font-weight: 600;">IFRS S1 & S2 (Sustainability Standards)</span>
                            <span class="badge badge-voluntary">Voluntary</span>
                            <span class="tooltip">
                                <span class="material-icons" style="font-size: 16px; color: #6C757D;">info</span>
                                <span class="tooltip-text">IFRS sustainability standards provide investor-focused disclosures</span>
                            </span>
                        </div>
                        <span class="material-icons">expand_more</span>
                    </div>
                    <div class="expandable-content">
                        <div class="expandable-content-inner">
                            <p>IFRS Sustainability Standards S1 and S2 provide a comprehensive global baseline for sustainability-related financial disclosures.</p>
                            <p><strong>Coverage:</strong> General sustainability-related disclosures (S1) and Climate-related disclosures (S2)</p>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="showPage('planning')">Back</button>
                    <button class="btn btn-primary" onclick="saveStandards()">Save</button>
                </div>
            </div>
        </div>

        <!-- Parameters Selection Sub-page -->
        <div class="page" id="parameters">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">Select Parameters</h1>
            
            <div class="card">
                <div class="card-header">
                    <div class="flex justify-between align-center">
                        <div>
                            <div class="card-title">ESG Parameters</div>
                            <div class="card-subtitle">Choose parameters based on your selected standards</div>
                        </div>
                        <button class="btn btn-secondary" onclick="showSelectedParameters()">View Selected</button>
                    </div>
                </div>

                <div id="parametersTable">
                    <!-- Dynamic content will be loaded here based on sidebar selection -->
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" id="paramBackBtn" onclick="navigateParameterCategory('back')">Back</button>
                    <div class="page-indicator" id="paramPageIndicator">Environmental (1 of 3)</div>
                    <button class="btn btn-primary" id="paramNextBtn" onclick="navigateParameterCategory('next')">Next</button>
                </div>
            </div>
        </div>

        <!-- Baseline Data Entry Sub-page -->
        <div class="page" id="baseline">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">Baseline Data Entry</h1>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Enter Baseline Data</div>
                    <div class="card-subtitle">Provide baseline values for selected parameters</div>
                </div>

                <div class="form-group">
                    <label for="baselineYear">Baseline Year</label>
                    <select id="baselineYear" name="baselineYear" required>
                        <option value="">Select Year</option>
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                        <option value="2019">2019</option>
                        <option value="2020">2020</option>
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                    </select>
                </div>

                <div id="baselineParameters">
                    <!-- Dynamic parameter fields will be loaded here -->
                </div>

                <div class="form-group">
                    <label>Upload Data File</label>
                    <input type="file" id="dataUpload" accept=".csv,.xlsx,.xls">
                    <div class="hint">Supported formats: CSV, Excel (XLSX, XLS)</div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="showSubPage('parameters')">Back</button>
                    <button class="btn btn-primary" onclick="showSubPage('goals')">Next</button>
                </div>
            </div>
        </div>

        <!-- Goals Setting Sub-page -->
        <div class="page" id="goals">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">Goal Setting</h1>
            
            <div class="card">
                <div class="card-header">
                    <div class="flex justify-between align-center">
                        <div>
                            <div class="card-title">Set ESG Goals</div>
                            <div class="card-subtitle">Define goals for your selected categories</div>
                        </div>
                        <button class="btn btn-primary" onclick="openGoalForm()" style="position: fixed; bottom: 30px; right: 30px; border-radius: 50%; width: 60px; height: 60px; font-size: 24px; z-index: 100;">+</button>
                    </div>
                </div>

                <div id="goalsList">
                    <!-- Dynamic goals will be displayed here -->
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" id="goalsBackBtn" onclick="navigateGoalsCategory('back')">Back</button>
                    <div class="page-indicator" id="goalsPageIndicator">Environmental (1 of 3)</div>
                    <button class="btn btn-primary" id="goalsNextBtn" onclick="navigateGoalsCategory('next')">Next</button>
                </div>
            </div>
        </div>

        <!-- Implementation Page -->
        <div class="page" id="implementation">
            <div style="background-color: #333333; color: white; padding: 10px 20px; margin: -30px -30px 20px -30px; display: flex; justify-content: space-between; align-items: center;">
                <h1 style="margin: 0;">Implementation</h1>
                <span style="font-size: 12px;">Last Updated: 10:35 PM IST, July 21, 2025</span>
            </div>
            
            <div id="implementationContent">
                <!-- Dynamic content will be loaded here based on sidebar selection -->
            </div>

            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="implBackBtn" onclick="navigateImplementationGoals('back')">Back</button>
                <div class="page-indicator" id="implPageIndicator">1 of 1</div>
                <button class="btn btn-primary" id="implNextBtn" onclick="navigateImplementationGoals('next')">Next</button>
            </div>
        </div>

        <!-- Monitoring Page -->
        <div class="page" id="monitoring">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">ESG Monitoring Dashboard</h1>
            
            <div class="grid grid-2 mb-20">
                <div class="card">
                    <div class="card-header">
                        <div class="flex justify-between align-center">
                            <div class="card-title" id="selectedCategoryTitle">Environmental Metrics</div>
                            <button class="btn btn-primary" onclick="exportChartData()">Export</button>
                        </div>
                    </div>
                    <div style="height: 300px; position: relative;">
                        <canvas id="categoryChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Performance Trends</div>
                    </div>
                    <div style="height: 300px; position: relative;">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Key Performance Indicators</div>
                </div>
                <div class="grid grid-3" id="kpiGrid">
                    <!-- Dynamic KPI cards will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Reporting Page -->
        <div class="page" id="reporting">
            <h1 style="margin-bottom: 30px; color: #333333; font-weight: 600;">ESG Reporting</h1>
            
            <div class="report-tabs">
                <button class="report-tab active" data-standard="brsr" onclick="switchReportingTab('brsr')">BRSR</button>
                <button class="report-tab" data-standard="gri" onclick="switchReportingTab('gri')">GRI</button>
                <button class="report-tab" data-standard="ifrs" onclick="switchReportingTab('ifrs')">IFRS</button>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="flex justify-between align-center">
                        <div>
                            <div class="card-title" id="reportTitle">BRSR Report</div>
                            <div class="card-subtitle">Complete your sustainability reporting requirements</div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-secondary" onclick="downloadReport()">Download</button>
                            <button class="btn btn-primary" onclick="generateReport()">Generate Report</button>
                        </div>
                    </div>
                </div>

                <div id="reportingFields">
                    <!-- Dynamic fields will be loaded here based on sidebar selection -->
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" id="reportBackBtn" onclick="navigateReportingSections('back')">Back</button>
                    <div class="page-indicator" id="reportPageIndicator">1 of 10</div>
                    <button class="btn btn-primary" id="reportNextBtn" onclick="navigateReportingSections('next')">Next</button>
                </div>
            </div>
        </div>

        <!-- ESG AI Page -->
        <div class="page" id="esg-ai">
            <div class="card text-center" style="min-height: 400px; display: flex; align-items: center; justify-content: center;">
                <div>
                    <span class="material-icons" style="font-size: 64px; color: #28A745; margin-bottom: 20px;">psychology</span>
                    <h2 style="color: #333333; margin-bottom: 10px;">ESG AI Assistant</h2>
                    <p style="color: #6C757D; font-size: 18px;">Coming Soon</p>
                    <p style="color: #6C757D; margin-top: 20px;">Our AI-powered ESG insights and recommendations will be available shortly.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide Drawer for Adding Items -->
    <div class="drawer-overlay" id="drawerOverlay" onclick="closeDrawer()"></div>
    <div class="slide-drawer" id="addDrawer">
        <div class="slide-drawer-header">
            <h3 id="drawerTitle">Add Item</h3>
            <button onclick="closeDrawer()" style="background: none; border: none; font-size: 24px; cursor: pointer;">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="slide-drawer-content">
            <div id="drawerFields">
                <!-- Dynamic form fields will be loaded here -->
            </div>
            <div style="margin-top: 20px;">
                <button class="btn btn-primary btn-full" onclick="saveDrawerItem()">Save</button>
            </div>
        </div>
    </div>

    <script>
        // Data Models
        const esgData = {
            selectedStandards: ['brsr'],
            selectedParameters: [],
            goals: {
                Environmental: [
                    { id: 'reduce-energy', name: 'Reduce Energy Use', description: 'Lower energy consumption by 20%', subcategory: 'energy' },
                    { id: 'water-efficiency', name: 'Improve Water Efficiency', description: 'Reduce water usage by 15%', subcategory: 'water' }
                ],
                Social: [
                    { id: 'employee-wellness', name: 'Enhance Employee Wellness', description: 'Implement wellness programs' },
                    { id: 'diversity', name: 'Improve Diversity', description: 'Increase diversity hiring' }
                ],
                Governance: [
                    { id: 'compliance-training', name: 'Improve Compliance Training', description: 'Enhance training coverage' },
                    { id: 'transparency', name: 'Enhance Transparency', description: 'Improve disclosure practices' }
                ]
            },
            initiatives: {
                'reduce-energy': [
                    { id: 'energy-audit', name: 'Energy Audit', description: 'Comprehensive energy assessment', status: 'In Progress' }
                ],
                'water-efficiency': [
                    { id: 'water-management', name: 'Water Management Plan', description: 'Develop water conservation strategy', status: 'Pending' }
                ],
                'employee-wellness': [
                    { id: 'wellness-program', name: 'Wellness Program', description: 'Employee health and wellness initiative', status: 'In Progress' }
                ],
                'diversity': [
                    { id: 'diversity-training', name: 'Diversity Training', description: 'Bias training and inclusive practices', status: 'Pending' }
                ],
                'compliance-training': [
                    { id: 'compliance-audit', name: 'Compliance Audit', description: 'Regular compliance assessment', status: 'In Progress' }
                ],
                'transparency': [
                    { id: 'transparency-report', name: 'Transparency Report', description: 'Annual transparency disclosure', status: 'Pending' }
                ]
            },
            targets: {
                'energy-audit': [
                    { id: 'renewables-80', name: '80% Renewables', initiative: 'Energy Audit', level: 'Organization', tracking: 'Monthly', action: 'Percentage Increase', value: '80%', year: '2027' }
                ],
                'wellness-program': [
                    { id: 'wellness-participation', name: 'Increase Wellness Participation', initiative: 'Wellness Program', level: 'Facility', tracking: 'Quarterly', action: 'Increase', value: '50%', year: '2026' }
                ],
                'compliance-audit': [
                    { id: 'training-coverage', name: '100% Training Coverage', initiative: 'Compliance Audit', level: 'Organization', tracking: 'Monthly', action: 'Increase', value: '100%', year: '2026' }
                ]
            },
            tasks: {
                'renewables-80': [
                    { id: 'conduct-audit', name: 'Conduct Audit', assignedTo: 'John', dueDate: '2025-08-01', recurring: 'No', status: 'In Progress' }
                ],
                'wellness-participation': [
                    { id: 'schedule-training', name: 'Schedule Training', assignedTo: 'Sarah', dueDate: '2025-09-01', recurring: 'Yes', status: 'Pending' }
                ],
                'training-coverage': [
                    { id: 'audit-compliance', name: 'Audit Compliance', assignedTo: 'Mike', dueDate: '2025-07-30', recurring: 'No', status: 'In Progress' }
                ]
            }
        };

        const parametersData = {
            Environmental: {
                energy: [
                    { name: 'Electricity Consumption from Grid', scope: 'Scope 1', unit: 'kWh', mandatory: true },
                    { name: 'Renewable Energy Consumption', scope: 'Scope 1', unit: 'kWh', mandatory: false },
                    { name: 'Natural Gas Consumption', scope: 'Scope 1', unit: 'cubic meters', mandatory: true }
                ],
                water: [
                    { name: 'Total Water Consumption', scope: 'Scope 1', unit: 'liters', mandatory: true },
                    { name: 'Recycled Water Usage', scope: 'Scope 1', unit: 'liters', mandatory: false },
                    { name: 'Water Discharge', scope: 'Scope 1', unit: 'liters', mandatory: true }
                ],
                waste: [
                    { name: 'Total Waste Generated', scope: 'Scope 1', unit: 'kg', mandatory: true },
                    { name: 'Recycled Waste', scope: 'Scope 1', unit: 'kg', mandatory: false },
                    { name: 'Hazardous Waste', scope: 'Scope 1', unit: 'kg', mandatory: true }
                ],
                biodiversity: [
                    { name: 'Land Use Impact', scope: 'Scope 1', unit: 'hectares', mandatory: false },
                    { name: 'Protected Area Investment', scope: 'Scope 1', unit: 'currency', mandatory: false }
                ]
            },
            Social: {
                employment: [
                    { name: 'Total Employees', scope: 'Organization', unit: 'count', mandatory: true },
                    { name: 'New Hires', scope: 'Organization', unit: 'count', mandatory: true }
                ],
                safety: [
                    { name: 'Workplace Accidents', scope: 'Organization', unit: 'count', mandatory: true },
                    { name: 'Safety Training Hours', scope: 'Organization', unit: 'hours', mandatory: true }
                ],
                diversity: [
                    { name: 'Gender Diversity Ratio', scope: 'Organization', unit: 'percentage', mandatory: true },
                    { name: 'Leadership Diversity', scope: 'Organization', unit: 'percentage', mandatory: false }
                ]
            },
            Governance: {
                compliance: [
                    { name: 'Compliance Training Completion', scope: 'Organization', unit: 'percentage', mandatory: true },
                    { name: 'Regulatory Violations', scope: 'Organization', unit: 'count', mandatory: true }
                ],
                transparency: [
                    { name: 'Board Independence', scope: 'Organization', unit: 'percentage', mandatory: true },
                    { name: 'ESG Disclosure Score', scope: 'Organization', unit: 'score', mandatory: false }
                ]
            }
        };

        const templateGoals = {
            Environmental: {
                energy: ['Reduce Energy Use', 'Increase Renewable Energy', 'Improve Energy Efficiency'],
                water: ['Improve Water Efficiency', 'Reduce Water Consumption', 'Increase Water Recycling'],
                waste: ['Minimize Waste Generation', 'Increase Recycling Rate', 'Eliminate Single-use Plastics'],
                biodiversity: ['Protect Biodiversity', 'Restore Natural Habitats']
            },
            Social: {
                employment: ['Enhance Employee Wellness', 'Improve Work-Life Balance', 'Increase Employee Satisfaction'],
                safety: ['Improve Workplace Safety', 'Reduce Accidents', 'Enhance Safety Training'],
                diversity: ['Improve Diversity', 'Promote Inclusion', 'Increase Female Leadership']
            },
            Governance: {
                compliance: ['Improve Compliance Training', 'Enhance Risk Management', 'Strengthen Internal Controls'],
                transparency: ['Enhance Transparency', 'Improve Stakeholder Engagement', 'Increase Disclosure Quality']
            }
        };

        // Current states
        let currentPage = 'login';
        let currentParameterCategory = 'Environmental';
        let currentGoalsCategory = 'Environmental';
        let currentImplementationCategory = 'Environmental';
        let currentMonitoringCategory = 'Environmental';
        let currentReportingStandard = 'brsr';
        let currentReportingSection = 0;

        // Navigation state tracking
        let hasLoggedIn = false;
        let hasCompletedOrganization = false;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
        });

        function initializeApp() {
            // Check if user has already completed initial setup
            hasLoggedIn = localStorage.getItem('hasLoggedIn') === 'true';
            hasCompletedOrganization = localStorage.getItem('hasCompletedOrganization') === 'true';

            if (hasLoggedIn && hasCompletedOrganization) {
                showMainApp();
                showPage('home');
            } else if (hasLoggedIn && !hasCompletedOrganization) {
                hideMainApp();
                showPage('organization');
            } else {
                hideMainApp();
                showPage('login');
            }
        }

        function hideMainApp() {
            document.querySelector('.navbar').style.display = 'none';
            document.querySelector('.sidebar').style.display = 'none';
            document.querySelector('#mainContent').style.marginTop = '0';
            document.querySelector('#mainContent').classList.remove('with-sidebar');
        }

        function showMainApp() {
            document.querySelector('.navbar').style.display = 'block';
            document.querySelector('#mainContent').style.marginTop = '60px';
        }

        function setupEventListeners() {
            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleLogin();
            });

            // Organization form
            document.getElementById('orgForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleOrganizationSubmission();
            });

            // Navigation tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    if (hasLoggedIn && hasCompletedOrganization) {
                        const page = this.dataset.page;
                        showPage(page);
                    }
                });
            });

            // Planning steps
            document.querySelectorAll('.planning-step').forEach(step => {
                step.addEventListener('click', function() {
                    const stepName = this.dataset.step;
                    showSubPage(stepName);
                });
            });

            // Hamburger menu
            document.getElementById('hamburger').addEventListener('click', function() {
                const navTabs = document.getElementById('navTabs');
                navTabs.classList.toggle('mobile-show');
            });

            // File upload
            document.getElementById('dataUpload')?.addEventListener('change', function() {
                if (this.files.length > 0) {
                    alert('File uploaded successfully!');
                }
            });
        }

        function handleLogin() {
            // Accept any credentials
            localStorage.setItem('hasLoggedIn', 'true');
            hasLoggedIn = true;
            
            if (!hasCompletedOrganization) {
                showPage('organization');
            } else {
                showMainApp();
                showPage('home');
            }
        }

        function handleOrganizationSubmission() {
            localStorage.setItem('hasCompletedOrganization', 'true');
            hasCompletedOrganization = true;
            showMainApp();
            showPage('home');
        }

        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            // Show selected page
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
                currentPage = pageId;
            }

            // Update navigation
            updateNavigation(pageId);
            updateSidebar(pageId);
            updateMainContent(pageId);

            // Load page-specific content
            switch(pageId) {
                case 'parameters':
                    loadParametersContent();
                    break;
                case 'baseline':
                    loadBaselineContent();
                    break;
                case 'goals':
                    loadGoalsContent();
                    break;
                case 'implementation':
                    loadImplementationContent();
                    break;
                case 'monitoring':
                    loadMonitoringContent();
                    initializeCharts();
                    break;
                case 'reporting':
                    loadReportingContent();
                    break;
            }
        }

        function showSubPage(subPageId) {
            showPage(subPageId);
        }

        function updateNavigation(pageId) {
            // Update navigation tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.page === pageId) {
                    tab.classList.add('active');
                }
            });
        }

        function updateSidebar(pageId) {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            // Pages that need sidebar
            const sidebarPages = ['parameters', 'goals', 'implementation', 'monitoring', 'reporting'];
            
            if (sidebarPages.includes(pageId)) {
                sidebar.classList.add('static');
                mainContent.classList.add('with-sidebar');
                loadSidebarContent(pageId);
            } else {
                sidebar.classList.remove('static');
                mainContent.classList.remove('with-sidebar');
            }
        }

        function updateMainContent(pageId) {
            // Update main content based on page
            const navbar = document.querySelector('.navbar');
            if (['login', 'organization'].includes(pageId)) {
                navbar.style.display = 'none';
            } else {
                navbar.style.display = 'block';
            }
        }

        function loadSidebarContent(pageId) {
            const sidebarContent = document.getElementById('sidebarContent');
            
            switch(pageId) {
                case 'parameters':
                case 'goals':
                case 'implementation':
                case 'monitoring':
                    sidebarContent.innerHTML = generateCategorySidebar();
                    break;
                case 'reporting':
                    sidebarContent.innerHTML = generateReportingSidebar();
                    break;
            }
        }

        function generateCategorySidebar() {
            const categories = [
                { name: 'Environmental', icon: '🌱', subcategories: ['energy', 'water', 'waste', 'biodiversity'] },
                { name: 'Social', icon: '👥', subcategories: ['employment', 'safety', 'diversity'] },
                { name: 'Governance', icon: '⚖️', subcategories: ['compliance', 'transparency'] }
            ];

            return categories.map(category => `
                <div class="sidebar-category">
                    <div class="sidebar-category-title ${currentParameterCategory === category.name ? 'active' : ''}" 
                         onclick="selectCategory('${category.name}')">
                        <div style="display: flex; align-items: center;">
                            <span class="sidebar-category-icon">${category.icon}</span>
                            ${category.name}
                        </div>
                        <span class="material-icons">expand_more</span>
                    </div>
                    <div class="sidebar-subcategories ${currentParameterCategory === category.name ? 'expanded' : ''}">
                        ${category.subcategories.map(sub => `
                            <div class="sidebar-subcategory ${getCurrentSubcategory() === sub ? 'active' : ''}" 
                                 onclick="selectSubcategory('${sub}')">
                                <span class="sidebar-subcategory-icon">⚡</span>
                                ${capitalizeFirst(sub)}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function generateReportingSidebar() {
            const reportingStandards = {
                brsr: {
                    title: 'BRSR Standards',
                    sections: [
                        'General Disclosures',
                        'Principle 1: Ethics',
                        'Principle 2: Goods & Services',
                        'Principle 3: Employee Wellbeing',
                        'Principle 4: Stakeholder Engagement',
                        'Principle 5: Human Rights',
                        'Principle 6: Environment',
                        'Principle 7: Policy Advocacy',
                        'Principle 8: Inclusive Growth',
                        'Principle 9: Customer Value'
                    ]
                },
                gri: {
                    title: 'GRI Standards',
                    sections: [
                        'General Disclosures',
                        'GRI 301: Materials',
                        'GRI 302: Energy',
                        'GRI 303: Water',
                        'GRI 305: Emissions'
                    ]
                },
                ifrs: {
                    title: 'IFRS Standards',
                    sections: [
                        'General Disclosures',
                        'IFRS S1: Sustainability',
                        'IFRS S2: Climate'
                    ]
                }
            };

            const standard = reportingStandards[currentReportingStandard];
            
            return `
                <div style="padding: 20px; border-bottom: 1px solid #DEE2E6;">
                    <h4>${standard.title}</h4>
                </div>
                ${standard.sections.map((section, index) => `
                    <div class="sidebar-subcategory ${index === currentReportingSection ? 'active' : ''}" 
                         onclick="selectReportingSection(${index})">
                        ${section}
                    </div>
                `).join('')}
            `;
        }

        function selectCategory(category) {
            currentParameterCategory = category;
            currentGoalsCategory = category;
            currentImplementationCategory = category;
            currentMonitoringCategory = category;
            
            updateSidebar(currentPage);
            
            switch(currentPage) {
                case 'parameters':
                    loadParametersContent();
                    break;
                case 'goals':
                    loadGoalsContent();
                    break;
                case 'implementation':
                    loadImplementationContent();
                    break;
                case 'monitoring':
                    loadMonitoringContent();
                    updateMonitoringCharts(category);
                    break;
            }
        }

        function selectSubcategory(subcategory) {
            // Update current subcategory and reload content
            if (currentPage === 'parameters') {
                loadParametersContent(subcategory);
            } else if (currentPage === 'goals') {
                loadGoalsContent(subcategory);
            }
            updateSidebar(currentPage);
        }

        function getCurrentSubcategory() {
            // Return the current active subcategory
            return 'energy'; // Default for now
        }

        function capitalizeFirst(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function loadParametersContent(subcategory = null) {
            const tableContainer = document.getElementById('parametersTable');
            const category = currentParameterCategory;
            const subcatData = subcategory ? 
                { [subcategory]: parametersData[category][subcategory] } : 
                parametersData[category];

            let tableHTML = `
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Select</th>
                                <th>Parameter Name</th>
                                <th>Scope</th>
                                <th>Unit</th>
                                <th>Type</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            Object.keys(subcatData).forEach(subcat => {
                subcatData[subcat].forEach(param => {
                    tableHTML += `
                        <tr>
                            <td><input type="checkbox" ${param.mandatory ? 'checked disabled' : ''}></td>
                            <td>${param.name}</td>
                            <td>${param.scope}</td>
                            <td>${param.unit}</td>
                            <td><span class="badge ${param.mandatory ? 'badge-mandatory' : 'badge-voluntary'}">${param.mandatory ? 'Mandatory' : 'Voluntary'}</span></td>
                        </tr>
                    `;
                });
            });

            tableHTML += `
                        </tbody>
                    </table>
                </div>
            `;

            tableContainer.innerHTML = tableHTML;
            updateParameterNavigation();
        }

        function updateParameterNavigation() {
            const categories = ['Environmental', 'Social', 'Governance'];
            const currentIndex = categories.indexOf(currentParameterCategory);
            
            const backBtn = document.getElementById('paramBackBtn');
            const nextBtn = document.getElementById('paramNextBtn');
            const indicator = document.getElementById('paramPageIndicator');

            indicator.textContent = `${currentParameterCategory} (${currentIndex + 1} of ${categories.length})`;

            if (currentIndex === 0) {
                backBtn.textContent = 'Back to Standards';
                backBtn.onclick = () => showSubPage('standards');
            } else {
                backBtn.textContent = 'Back';
                backBtn.onclick = () => navigateParameterCategory('back');
            }

            if (currentIndex === categories.length - 1) {
                nextBtn.textContent = 'Next to Baseline';
                nextBtn.onclick = () => showSubPage('baseline');
            } else {
                nextBtn.textContent = 'Next';
                nextBtn.onclick = () => navigateParameterCategory('next');
            }
        }

        function navigateParameterCategory(direction) {
            const categories = ['Environmental', 'Social', 'Governance'];
            const currentIndex = categories.indexOf(currentParameterCategory);

            if (direction === 'back' && currentIndex > 0) {
                currentParameterCategory = categories[currentIndex - 1];
            } else if (direction === 'next' && currentIndex < categories.length - 1) {
                currentParameterCategory = categories[currentIndex + 1];
            }

            selectCategory(currentParameterCategory);
        }

        function loadGoalsContent() {
            const goalsList = document.getElementById('goalsList');
            const category = currentGoalsCategory;
            const goals = esgData.goals[category] || [];

            let goalsHTML = '';
            if (goals.length === 0) {
                goalsHTML = '<p>No goals set for this category yet.</p>';
            } else {
                goals.forEach(goal => {
                    goalsHTML += `
                        <div class="card" style="margin-bottom: 15px;">
                            <div class="card-header">
                                <div class="card-title">${goal.name}</div>
                                <div class="card-subtitle">${goal.description}</div>
                            </div>
                        </div>
                    `;
                });
            }

            goalsList.innerHTML = goalsHTML;
            updateGoalsNavigation();
        }

        function updateGoalsNavigation() {
            const categories = ['Environmental', 'Social', 'Governance'];
            const currentIndex = categories.indexOf(currentGoalsCategory);
            
            const backBtn = document.getElementById('goalsBackBtn');
            const nextBtn = document.getElementById('goalsNextBtn');
            const indicator = document.getElementById('goalsPageIndicator');

            indicator.textContent = `${currentGoalsCategory} (${currentIndex + 1} of ${categories.length})`;

            // Check if there are goals in current category
            const hasGoals = esgData.goals[currentGoalsCategory] && esgData.goals[currentGoalsCategory].length > 0;
            
            if (currentIndex === 0) {
                backBtn.classList.add('btn-disabled');
                backBtn.onclick = null;
            } else {
                backBtn.classList.remove('btn-disabled');
                backBtn.onclick = () => navigateGoalsCategory('back');
            }

            if (currentIndex === categories.length - 1) {
                nextBtn.classList.add('btn-disabled');
                nextBtn.onclick = null;
            } else {
                nextBtn.classList.remove('btn-disabled');
                nextBtn.onclick = () => navigateGoalsCategory('next');
            }
        }

        function navigateGoalsCategory(direction) {
            const categories = ['Environmental', 'Social', 'Governance'];
            const currentIndex = categories.indexOf(currentGoalsCategory);

            if (direction === 'back' && currentIndex > 0) {
                currentGoalsCategory = categories[currentIndex - 1];
            } else if (direction === 'next' && currentIndex < categories.length - 1) {
                currentGoalsCategory = categories[currentIndex + 1];
            }

            selectCategory(currentGoalsCategory);
        }

        function loadImplementationContent() {
            const content = document.getElementById('implementationContent');
            const category = currentImplementationCategory;
            const goals = esgData.goals[category] || [];

            let implementationHTML = '';

            goals.forEach(goal => {
                const initiatives = esgData.initiatives[goal.id] || [];
                
                implementationHTML += `
                    <div class="expandable">
                        <div class="expandable-header" onclick="toggleImplementationSection(this)">
                            <div class="flex align-center gap-10">
                                <span style="font-weight: 600;">${goal.name}</span>
                                <span class="badge badge-in-progress">Active</span>
                            </div>
                            <span class="material-icons">expand_more</span>
                        </div>
                        <div class="expandable-content">
                            <div class="expandable-content-inner">
                                ${initiatives.map(initiative => {
                                    const targets = esgData.targets[initiative.id] || [];
                                    return `
                                        <div class="expandable" style="margin-left: 20px;">
                                            <div class="expandable-header" onclick="toggleImplementationSection(this)">
                                                <div class="flex align-center gap-10">
                                                    <span>${initiative.name}</span>
                                                    <span class="badge badge-${initiative.status.toLowerCase().replace(' ', '-')}">${initiative.status}</span>
                                                </div>
                                                <span class="material-icons">expand_more</span>
                                            </div>
                                            <div class="expandable-content">
                                                <div class="expandable-content-inner">
                                                    ${targets.map(target => {
                                                        const tasks = esgData.tasks[target.id] || [];
                                                        return `
                                                            <div class="expandable" style="margin-left: 20px;">
                                                                <div class="expandable-header" onclick="toggleImplementationSection(this)">
                                                                    <span>${target.name}</span>
                                                                    <span class="material-icons">expand_more</span>
                                                                </div>
                                                                <div class="expandable-content">
                                                                    <div class="expandable-content-inner">
                                                                        ${tasks.map(task => `
                                                                            <div style="padding: 10px; border: 1px solid #DEE2E6; border-radius: 5px; margin-bottom: 10px;">
                                                                                <div class="flex justify-between align-center">
                                                                                    <span>${task.name}</span>
                                                                                    <span class="badge badge-${task.status.toLowerCase().replace(' ', '-')}">${task.status}</span>
                                                                                </div>
                                                                                <div style="font-size: 12px; color: #6C757D; margin-top: 5px;">
                                                                                    Assigned to: ${task.assignedTo} | Due: ${task.dueDate}
                                                                                </div>
                                                                            </div>
                                                                        `).join('')}
                                                                        <button class="btn btn-secondary" onclick="openDrawer('task')">Add Task</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        `;
                                                    }).join('')}
                                                    <button class="btn btn-secondary" onclick="openDrawer('target')">Add Target</button>
                                                </div>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                                <button class="btn btn-secondary" onclick="openDrawer('initiative')">Add Initiative</button>
                            </div>
                        </div>
                    </div>
                `;
            });

            content.innerHTML = implementationHTML;
            updateImplementationNavigation();
        }

        function updateImplementationNavigation() {
            const categories = ['Environmental', 'Social', 'Governance'];
            const categoryGoals = esgData.goals[currentImplementationCategory] || [];
            const currentIndex = categories.indexOf(currentImplementationCategory);
            
            const backBtn = document.getElementById('implBackBtn');
            const nextBtn = document.getElementById('implNextBtn');
            const indicator = document.getElementById('implPageIndicator');

            indicator.textContent = `${currentImplementationCategory} (${currentIndex + 1} of ${categories.length})`;

            if (currentIndex === 0) {
                backBtn.classList.add('btn-disabled');
                backBtn.onclick = null;
            } else {
                backBtn.classList.remove('btn-disabled');
                backBtn.onclick = () => navigateImplementationGoals('back');
            }

            if (currentIndex === categories.length - 1) {
                nextBtn.classList.add('btn-disabled');
                nextBtn.onclick = null;
            } else {
                nextBtn.classList.remove('btn-disabled');
                nextBtn.onclick = () => navigateImplementationGoals('next');
            }
        }

        function navigateImplementationGoals(direction) {
            const categories = ['Environmental', 'Social', 'Governance'];
            const currentIndex = categories.indexOf(currentImplementationCategory);

            if (direction === 'back' && currentIndex > 0) {
                currentImplementationCategory = categories[currentIndex - 1];
            } else if (direction === 'next' && currentIndex < categories.length - 1) {
                currentImplementationCategory = categories[currentIndex + 1];
            }

            selectCategory(currentImplementationCategory);
        }

        function loadBaselineContent() {
            const container = document.getElementById('baselineParameters');
            let parametersHTML = '';

            // Get all selected parameters
            Object.keys(parametersData).forEach(category => {
                Object.keys(parametersData[category]).forEach(subcat => {
                    parametersData[category][subcat].forEach(param => {
                        parametersHTML += `
                            <div class="form-group">
                                <label>${param.name} (${param.unit})</label>
                                <div style="display: flex; gap: 10px;">
                                    <input type="number" placeholder="Enter value" style="flex: 1;">
                                    <input type="text" value="${param.scope}" readonly style="flex: 0 0 120px; background: #F8F9FA;">
                                    <input type="text" value="${param.unit}" readonly style="flex: 0 0 80px; background: #F8F9FA;">
                                </div>
                            </div>
                        `;
                    });
                });
            });

            container.innerHTML = parametersHTML;
        }

        function loadMonitoringContent() {
            const kpiGrid = document.getElementById('kpiGrid');
            const categoryTitle = document.getElementById('selectedCategoryTitle');
            
            categoryTitle.textContent = `${currentMonitoringCategory} Metrics`;

            const kpiData = {
                Environmental: [
                    { title: 'Energy Reduction', value: '15%', status: 'success' },
                    { title: 'Water Efficiency', value: '23%', status: 'success' },
                    { title: 'Waste Reduction', value: '8%', status: 'warning' }
                ],
                Social: [
                    { title: 'Employee Satisfaction', value: '78%', status: 'success' },
                    { title: 'Safety Incidents', value: '3', status: 'warning' },
                    { title: 'Training Hours', value: '1,250', status: 'success' }
                ],
                Governance: [
                    { title: 'Compliance Score', value: '92%', status: 'success' },
                    { title: 'Board Independence', value: '67%', status: 'warning' },
                    { title: 'Risk Assessment', value: 'Complete', status: 'success' }
                ]
            };

            const kpis = kpiData[currentMonitoringCategory] || [];
            
            kpiGrid.innerHTML = kpis.map(kpi => `
                <div class="card text-center">
                    <div class="card-title" style="color: ${kpi.status === 'success' ? '#28A745' : '#FFC107'}; font-size: 24px;">${kpi.value}</div>
                    <div class="card-subtitle">${kpi.title}</div>
                </div>
            `).join('');
        }

        function loadReportingContent() {
            const fieldsContainer = document.getElementById('reportingFields');
            const section = getCurrentReportingSection();
            
            let fieldsHTML = `
                <div class="card-header">
                    <div class="card-title">${section.name}</div>
                </div>
            `;

            // Generate sample fields based on section
            const sampleFields = getSampleFieldsForSection(section);
            fieldsHTML += sampleFields;

            fieldsContainer.innerHTML = fieldsHTML;
            updateReportingNavigation();
        }

        function getCurrentReportingSection() {
            const reportingStandards = {
                brsr: [
                    { name: 'General Disclosures', id: 'general' },
                    { name: 'Principle 1: Ethics', id: 'principle1' },
                    { name: 'Principle 2: Goods & Services', id: 'principle2' },
                    { name: 'Principle 3: Employee Wellbeing', id: 'principle3' },
                    { name: 'Principle 4: Stakeholder Engagement', id: 'principle4' },
                    { name: 'Principle 5: Human Rights', id: 'principle5' },
                    { name: 'Principle 6: Environment', id: 'principle6' },
                    { name: 'Principle 7: Policy Advocacy', id: 'principle7' },
                    { name: 'Principle 8: Inclusive Growth', id: 'principle8' },
                    { name: 'Principle 9: Customer Value', id: 'principle9' }
                ],
                gri: [
                    { name: 'General Disclosures', id: 'general' },
                    { name: 'GRI 301: Materials', id: 'gri301' },
                    { name: 'GRI 302: Energy', id: 'gri302' },
                    { name: 'GRI 303: Water', id: 'gri303' },
                    { name: 'GRI 305: Emissions', id: 'gri305' }
                ],
                ifrs: [
                    { name: 'General Disclosures', id: 'general' },
                    { name: 'IFRS S1: Sustainability', id: 'ifrs1' },
                    { name: 'IFRS S2: Climate', id: 'ifrs2' }
                ]
            };

            return reportingStandards[currentReportingStandard][currentReportingSection];
        }

        function getSampleFieldsForSection(section) {
            const fieldTemplates = {
                general: `
                    <div class="form-group">
                        <label>Corporate Identity Number <span class="badge badge-completed">Autopopulated</span></label>
                        <input type="text" value="U12345ABC2020PLC123456" readonly>
                    </div>
                    <div class="form-group">
                        <label>Organization Name <span class="badge badge-completed">Autopopulated</span></label>
                        <input type="text" value="Sample Corporation Ltd." readonly>
                    </div>
                    <div class="form-group">
                        <label>Annual Turnover <span class="badge badge-in-progress">Essential</span></label>
                        <input type="number" placeholder="Enter annual turnover">
                    </div>
                `,
                principle1: `
                    <div class="form-group">
                        <label>P1.E1: Code of Conduct Coverage <span class="badge badge-in-progress">Essential</span></label>
                        <textarea rows="3" placeholder="Describe code of conduct coverage"></textarea>
                    </div>
                    <div class="form-group">
                        <label>P1.E2: Ethics Committee Formation <span class="badge badge-pending">Leadership</span></label>
                        <select>
                            <option value="">Select status</option>
                            <option value="formed">Committee Formed</option>
                            <option value="pending">Formation Pending</option>
                        </select>
                    </div>
                `,
                gri301: `
                    <div class="form-group">
                        <label>301-1: Materials Used by Weight <span class="badge badge-in-progress">Essential</span></label>
                        <input type="number" placeholder="Enter total materials weight">
                    </div>
                    <div class="form-group">
                        <label>301-2: Recycled Input Materials <span class="badge badge-pending">Leadership</span></label>
                        <input type="number" placeholder="Enter recycled materials percentage">
                    </div>
                `
            };

            return fieldTemplates[section.id] || fieldTemplates.general;
        }

        function updateReportingNavigation() {
            const standards = {
                brsr: 10,
                gri: 5,
                ifrs: 3
            };
            
            const totalSections = standards[currentReportingStandard];
            const backBtn = document.getElementById('reportBackBtn');
            const nextBtn = document.getElementById('reportNextBtn');
            const indicator = document.getElementById('reportPageIndicator');

            indicator.textContent = `${currentReportingSection + 1} of ${totalSections}`;

            if (currentReportingSection === 0) {
                backBtn.classList.add('btn-disabled');
                backBtn.onclick = null;
            } else {
                backBtn.classList.remove('btn-disabled');
                backBtn.onclick = () => navigateReportingSections('back');
            }

            if (currentReportingSection === totalSections - 1) {
                nextBtn.classList.add('btn-disabled');
                nextBtn.onclick = null;
            } else {
                nextBtn.classList.remove('btn-disabled');
                nextBtn.onclick = () => navigateReportingSections('next');
            }
        }

        function navigateReportingSections(direction) {
            const standards = {
                brsr: 10,
                gri: 5,
                ifrs: 3
            };
            
            const totalSections = standards[currentReportingStandard];

            if (direction === 'back' && currentReportingSection > 0) {
                currentReportingSection--;
            } else if (direction === 'next' && currentReportingSection < totalSections - 1) {
                currentReportingSection++;
            }

            loadReportingContent();
            updateSidebar('reporting');
        }

        function selectReportingSection(sectionIndex) {
            currentReportingSection = sectionIndex;
            loadReportingContent();
            updateSidebar('reporting');
        }

        function switchReportingTab(standard) {
            currentReportingStandard = standard;
            currentReportingSection = 0;
            
            // Update tab states
            document.querySelectorAll('.report-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.standard === standard) {
                    tab.classList.add('active');
                }
            });
            
            loadReportingContent();
            updateSidebar('reporting');
        }

        // Navigation functions
        function navigateToGoal(category, goalId) {
            currentImplementationCategory = category;
            showPage('implementation');
        }

        // Utility functions
        function toggleExpandable(header) {
            const content = header.nextElementSibling;
            const icon = header.querySelector('.material-icons');
            
            content.classList.toggle('expanded');
            icon.textContent = content.classList.contains('expanded') ? 'expand_less' : 'expand_more';
        }

        function toggleImplementationSection(header) {
            const content = header.nextElementSibling;
            const icon = header.querySelector('.material-icons');
            
            content.classList.toggle('expanded');
            icon.textContent = content.classList.contains('expanded') ? 'expand_less' : 'expand_more';
        }

        function saveStandards() {
            alert('Standards saved successfully!');
            showSubPage('parameters');
        }

        function showSelectedParameters() {
            // Show modal with selected parameters
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); z-index: 1003; display: flex; 
                justify-content: center; align-items: center;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white; padding: 30px; border-radius: 10px; 
                max-width: 800px; max-height: 80vh; overflow-y: auto; width: 90%;
            `;
            
            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="margin: 0; color: #333;">Selected Parameters</h2>
                    <button onclick="this.closest('.modal').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer;">×</button>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #DC3545; margin-bottom: 10px;">Mandatory Parameters</h3>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
                        <div style="margin-bottom: 8px;">• Energy Consumption (BRSR)</div>
                        <div style="margin-bottom: 8px;">• Water Usage (BRSR)</div>
                        <div style="margin-bottom: 8px;">• Waste Management (BRSR)</div>
                        <div style="margin-bottom: 8px;">• GHG Emissions (BRSR)</div>
                        <div style="margin-bottom: 8px;">• Employee Health & Safety (BRSR)</div>
                        <div>• Board Diversity (BRSR)</div>
                    </div>
                    
                    <h3 style="color: #007BFF; margin-bottom: 10px;">Voluntary Parameters</h3>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                        <div style="margin-bottom: 8px;">• Renewable Energy Usage (GRI)</div>
                        <div style="margin-bottom: 8px;">• Community Investment (GRI)</div>
                        <div style="margin-bottom: 8px;">• Supply Chain Sustainability (GRI)</div>
                        <div>• Biodiversity Impact (GRI)</div>
                    </div>
                    
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="exportSelectedParameters('csv')">
                            <span class="material-icons" style="font-size: 16px; margin-right: 5px;">download</span>
                            Export as CSV
                        </button>
                        <button class="btn btn-secondary" onclick="exportSelectedParameters('pdf')">
                            <span class="material-icons" style="font-size: 16px; margin-right: 5px;">picture_as_pdf</span>
                            Export as PDF
                        </button>
                    </div>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
        }

        function openGoalForm() {
            openDrawer('goal');
        }

        function openDrawer(type) {
            const drawer = document.getElementById('addDrawer');
            const overlay = document.getElementById('drawerOverlay');
            const title = document.getElementById('drawerTitle');
            const fields = document.getElementById('drawerFields');
            
            title.textContent = `Add ${type.charAt(0).toUpperCase() + type.slice(1)}`;
            
            let fieldsHtml = '';
            
            switch(type) {
                case 'goal':
                    fieldsHtml = `
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="customGoal" onchange="toggleCustomGoal()"> Add Custom Goal
                            </label>
                        </div>
                        <div class="form-group" id="templateSection">
                            <label>Choose Template</label>
                            <select id="goalTemplate" onchange="updateGoalDescription()">
                                <option value="">Select a template</option>
                                ${getTemplateOptions()}
                            </select>
                        </div>
                        <div class="form-group" id="customSection" style="display: none;">
                            <label>Goal Name</label>
                            <input type="text" id="goalName" placeholder="Enter goal name">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="goalDescription" rows="3" placeholder="Enter description"></textarea>
                        </div>
                    `;
                    break;
                case 'initiative':
                    fieldsHtml = `
                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" id="initiative-name" placeholder="Enter initiative name">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="initiative-desc" rows="3" placeholder="Enter description"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select id="initiative-status">
                                <option value="">Select status</option>
                                <option value="Pending">Pending</option>
                                <option value="In Progress">In Progress</option>
                                <option value="Completed">Completed</option>
                            </select>
                        </div>
                    `;
                    break;
                case 'target':
                    fieldsHtml = `
                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" id="target-name" placeholder="Enter target name">
                        </div>
                        <div class="form-group">
                            <label>Initiative</label>
                            <select id="target-initiative">
                                <option value="">Select initiative</option>
                                <option value="Energy Audit">Energy Audit</option>
                                <option value="Wellness Program">Wellness Program</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Level</label>
                            <select id="target-level">
                                <option value="">Select level</option>
                                <option value="Organization">Organization</option>
                                <option value="Facility">Facility</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tracking</label>
                            <select id="target-tracking">
                                <option value="">Select tracking frequency</option>
                                <option value="Monthly Report">Monthly Report</option>
                                <option value="Weekly Report">Weekly Report</option>
                                <option value="Quarterly Report">Quarterly Report</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Action</label>
                            <select id="target-action">
                                <option value="">Select action</option>
                                <option value="Reduce">Reduce</option>
                                <option value="Increase">Increase</option>
                                <option value="Percentage Reduction">Percentage Reduction</option>
                                <option value="Percentage Increase">Percentage Increase</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Value</label>
                            <input type="text" id="target-value" placeholder="Enter target value">
                        </div>
                        <div class="form-group">
                            <label>Completion Year</label>
                            <input type="number" id="target-year" min="2025" max="2050" placeholder="Select year">
                        </div>
                    `;
                    break;
                case 'task':
                    fieldsHtml = `
                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" id="task-name" placeholder="Enter task name">
                        </div>
                        <div class="form-group">
                            <label>Assigned To</label>
                            <input type="text" id="task-assigned" placeholder="Enter assignee">
                        </div>
                        <div class="form-group">
                            <label>Due Date</label>
                            <input type="date" id="task-date">
                        </div>
                        <div class="form-group">
                            <label>Recurring</label>
                            <select id="task-recurring">
                                <option value="No">No</option>
                                <option value="Yes">Yes</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select id="task-status">
                                <option value="">Select status</option>
                                <option value="Pending">Pending</option>
                                <option value="In Progress">In Progress</option>
                                <option value="Completed">Completed</option>
                            </select>
                        </div>
                    `;
                    break;
            }
            
            fields.innerHTML = fieldsHtml;
            overlay.classList.add('active');
            drawer.classList.add('open');
        }

        function closeDrawer() {
            const drawer = document.getElementById('addDrawer');
            const overlay = document.getElementById('drawerOverlay');
            
            overlay.classList.remove('active');
            drawer.classList.remove('open');
        }

        function saveDrawerItem() {
            alert('Item saved successfully!');
            closeDrawer();
        }

        function getTemplateOptions() {
            const category = currentGoalsCategory;
            const subcategories = Object.keys(templateGoals[category] || {});
            
            return subcategories.map(subcat => 
                templateGoals[category][subcat].map(template => 
                    `<option value="${template}" data-subcat="${subcat}">${template}</option>`
                ).join('')
            ).join('');
        }

        function toggleCustomGoal() {
            const customCheckbox = document.getElementById('customGoal');
            const templateSection = document.getElementById('templateSection');
            const customSection = document.getElementById('customSection');
            
            if (customCheckbox.checked) {
                templateSection.style.display = 'none';
                customSection.style.display = 'block';
            } else {
                templateSection.style.display = 'block';
                customSection.style.display = 'none';
            }
        }

        function updateGoalDescription() {
            const select = document.getElementById('goalTemplate');
            const description = document.getElementById('goalDescription');
            
            if (select.value) {
                // Auto-fill description based on template
                description.value = `Implementation of ${select.value} initiative`;
            }
        }

        function exportChartData() {
            alert('Chart data exported successfully!');
        }

        function generateReport() {
            alert('Report generated successfully!');
        }

        function downloadReport() {
            const formats = ['PDF', 'CSV', 'Word'];
            const format = prompt(`Select format:\n${formats.map((f, i) => `${i+1}. ${f}`).join('\n')}`);
            
            if (format && format >= 1 && format <= 3) {
                alert(`Report downloaded as ${formats[format-1]} successfully!`);
            }
        }

        function exportSelectedParameters(format) {
            // Close the modal first
            document.querySelector('.modal')?.remove();
            
            if (format === 'csv') {
                const csvContent = `Parameter,Type,Standard
Energy Consumption,Mandatory,BRSR
Water Usage,Mandatory,BRSR
Waste Management,Mandatory,BRSR
GHG Emissions,Mandatory,BRSR
Employee Health & Safety,Mandatory,BRSR
Board Diversity,Mandatory,BRSR
Renewable Energy Usage,Voluntary,GRI
Community Investment,Voluntary,GRI
Supply Chain Sustainability,Voluntary,GRI
Biodiversity Impact,Voluntary,GRI`;
                
                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'selected_parameters.csv';
                a.click();
                window.URL.revokeObjectURL(url);
                alert('Parameters exported as CSV successfully!');
            } else if (format === 'pdf') {
                alert('Parameters exported as PDF successfully!');
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // Clear login state
                localStorage.removeItem('hasLoggedIn');
                localStorage.removeItem('hasCompletedOrganization');
                hasLoggedIn = false;
                hasCompletedOrganization = false;
                
                // Hide navbar and sidebar
                hideMainApp();
                
                // Show login page
                showPage('login');
            }
        }

        function updateMonitoringCharts(category) {
            // This would update charts based on selected category
            console.log('Updating monitoring charts for category:', category);
        }

        function initializeCharts() {
            // Environmental Chart
            const envCtx = document.getElementById('categoryChart');
            if (envCtx) {
                new Chart(envCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Energy', 'Water', 'Waste', 'Emissions'],
                        datasets: [{
                            data: [30, 25, 20, 25],
                            backgroundColor: ['#28A745', '#FFC107', '#DC3545', '#007BFF']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
            
            // Trend Chart
            const trendCtx = document.getElementById('trendChart');
            if (trendCtx) {
                new Chart(trendCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [
                            {
                                label: 'Environmental',
                                data: [65, 68, 70, 72, 75, 78],
                                borderColor: '#28A745',
                                backgroundColor: 'rgba(40, 167, 69, 0.1)'
                            },
                            {
                                label: 'Social',
                                data: [60, 62, 65, 68, 70, 72],
                                borderColor: '#007BFF',
                                backgroundColor: 'rgba(0, 123, 255, 0.1)'
                            },
                            {
                                label: 'Governance',
                                data: [70, 72, 74, 75, 76, 78],
                                borderColor: '#6F42C1',
                                backgroundColor: 'rgba(111, 66, 193, 0.1)'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
        }
    </script>
</body>
</html>